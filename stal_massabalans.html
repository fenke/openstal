<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="Mass balance calculations for a barn following Wageningen UR model.">

<title>Barn Mass Balance – openstal</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2" crossorigin="anonymous"></script><script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-9d7b9f665a25c2960f626e3790e9c6e0.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-00fb830ab0388804371a937468084cfa.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-9d7b9f665a25c2960f626e3790e9c6e0.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-381556cdc758799860d21528298221b7.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark-5650da806b0bf1bf98815a3cf5e4585c.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-381556cdc758799860d21528298221b7.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js" integrity="sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="Barn Mass Balance – openstal">
<meta property="og:description" content="Mass balance calculations for a barn following Wageningen UR model.">
<meta property="og:site_name" content="openstal">
</head>

<body class="nav-sidebar floating nav-fixed quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const darkModeDefault = authorPrefersDark;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">openstal</span>
    </a>
  </div>
        <div class="quarto-navbar-tools tools-end">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./stal_massabalans.html">Barn Mass Balance</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
      <a href="./index.html" class="sidebar-logo-link">
      </a>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">openstal</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./core.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">core</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stal_massabalans.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Barn Mass Balance</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#achtergrond" id="toc-achtergrond" class="nav-link active" data-scroll-target="#achtergrond">Achtergrond</a>
  <ul>
  <li><a href="#emissieberekening" id="toc-emissieberekening" class="nav-link" data-scroll-target="#emissieberekening">Emissieberekening</a></li>
  <li><a href="#concentratiemeting" id="toc-concentratiemeting" class="nav-link" data-scroll-target="#concentratiemeting">Concentratiemeting</a></li>
  <li><a href="#ventilatiedebiet" id="toc-ventilatiedebiet" class="nav-link" data-scroll-target="#ventilatiedebiet">Ventilatiedebiet</a>
  <ul class="collapse">
  <li><a href="#mechanisch-geventileerde-stallen" id="toc-mechanisch-geventileerde-stallen" class="nav-link" data-scroll-target="#mechanisch-geventileerde-stallen">Mechanisch geventileerde stallen</a></li>
  <li><a href="#natuurlijk-geventileerde-stallen" id="toc-natuurlijk-geventileerde-stallen" class="nav-link" data-scroll-target="#natuurlijk-geventileerde-stallen">Natuurlijk geventileerde stallen</a></li>
  </ul></li>
  <li><a href="#emissieberekening-met-co2-massabalans" id="toc-emissieberekening-met-co2-massabalans" class="nav-link" data-scroll-target="#emissieberekening-met-co2-massabalans">Emissieberekening met CO<sub>2</sub> massabalans</a></li>
  </ul></li>
  <li><a href="#support-calculations" id="toc-support-calculations" class="nav-link" data-scroll-target="#support-calculations">Support calculations</a>
  <ul>
  <li><a href="#gas-density" id="toc-gas-density" class="nav-link" data-scroll-target="#gas-density">Gas density</a></li>
  <li><a href="#gas_density" id="toc-gas_density" class="nav-link" data-scroll-target="#gas_density">gas_density</a></li>
  <li><a href="#gasconcentraties-in-de-lucht" id="toc-gasconcentraties-in-de-lucht" class="nav-link" data-scroll-target="#gasconcentraties-in-de-lucht">Gasconcentraties in de lucht</a>
  <ul class="collapse">
  <li><a href="#concentrations-of-chemicals" id="toc-concentrations-of-chemicals" class="nav-link" data-scroll-target="#concentrations-of-chemicals">Concentrations of chemicals</a></li>
  <li><a href="#functie-implementatie" id="toc-functie-implementatie" class="nav-link" data-scroll-target="#functie-implementatie">Functie implementatie</a></li>
  </ul></li>
  <li><a href="#gas_density_from_sensor_measurment" id="toc-gas_density_from_sensor_measurment" class="nav-link" data-scroll-target="#gas_density_from_sensor_measurment">gas_density_from_sensor_measurment</a></li>
  <li><a href="#co2-productie" id="toc-co2-productie" class="nav-link" data-scroll-target="#co2-productie">CO<sub>2</sub> productie</a>
  <ul class="collapse">
  <li><a href="#melkvee" id="toc-melkvee" class="nav-link" data-scroll-target="#melkvee">Melkvee</a></li>
  </ul></li>
  <li><a href="#pco2_melkvee" id="toc-pco2_melkvee" class="nav-link" data-scroll-target="#pco2_melkvee">PCO2_melkvee</a>
  <ul class="collapse">
  <li><a href="#pinken" id="toc-pinken" class="nav-link" data-scroll-target="#pinken">Pinken</a></li>
  </ul></li>
  <li><a href="#pco2_pinken" id="toc-pco2_pinken" class="nav-link" data-scroll-target="#pco2_pinken">PCO2_pinken</a>
  <ul class="collapse">
  <li><a href="#temperatuur-correctie" id="toc-temperatuur-correctie" class="nav-link" data-scroll-target="#temperatuur-correctie">Temperatuur correctie</a></li>
  </ul></li>
  <li><a href="#pco2_temperatuurcorrectie" id="toc-pco2_temperatuurcorrectie" class="nav-link" data-scroll-target="#pco2_temperatuurcorrectie">PCO2_temperatuurcorrectie</a></li>
  <li><a href="#calculate_temperatuur_correctie" id="toc-calculate_temperatuur_correctie" class="nav-link" data-scroll-target="#calculate_temperatuur_correctie">calculate_temperatuur_correctie</a>
  <ul class="collapse">
  <li><a href="#pco2-functie-categorie-mapping" id="toc-pco2-functie-categorie-mapping" class="nav-link" data-scroll-target="#pco2-functie-categorie-mapping">PcO<sub>2</sub> functie categorie mapping</a></li>
  <li><a href="#pco2-parameters" id="toc-pco2-parameters" class="nav-link" data-scroll-target="#pco2-parameters">PCO<sub>2</sub> Parameters</a></li>
  </ul></li>
  <li><a href="#create_pco2_function_mapping_from_parameters" id="toc-create_pco2_function_mapping_from_parameters" class="nav-link" data-scroll-target="#create_pco2_function_mapping_from_parameters">create_pco2_function_mapping_from_parameters</a></li>
  <li><a href="#pco2_calculation_from_mapping" id="toc-pco2_calculation_from_mapping" class="nav-link" data-scroll-target="#pco2_calculation_from_mapping">PCO2_calculation_from_mapping</a></li>
  <li><a href="#test-berekeningen" id="toc-test-berekeningen" class="nav-link" data-scroll-target="#test-berekeningen">Test berekeningen</a></li>
  <li><a href="#emissie-berekeningen" id="toc-emissie-berekeningen" class="nav-link" data-scroll-target="#emissie-berekeningen">Emissie berekeningen</a>
  <ul class="collapse">
  <li><a href="#ratiomethode" id="toc-ratiomethode" class="nav-link" data-scroll-target="#ratiomethode">Ratiomethode</a></li>
  <li><a href="#ratiomethode-met-twee-meetpunten" id="toc-ratiomethode-met-twee-meetpunten" class="nav-link" data-scroll-target="#ratiomethode-met-twee-meetpunten">Ratiomethode met twee meetpunten</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#implementatie-ratiomethode" id="toc-implementatie-ratiomethode" class="nav-link" data-scroll-target="#implementatie-ratiomethode">Implementatie ratiomethode</a>
  <ul>
  <li><a href="#externe-data" id="toc-externe-data" class="nav-link" data-scroll-target="#externe-data">Externe data</a>
  <ul class="collapse">
  <li><a href="#vera-data" id="toc-vera-data" class="nav-link" data-scroll-target="#vera-data">VERA data</a></li>
  </ul></li>
  <li><a href="#exctractie-van-werkbare-data-uit-gegeven-werkboeken" id="toc-exctractie-van-werkbare-data-uit-gegeven-werkboeken" class="nav-link" data-scroll-target="#exctractie-van-werkbare-data-uit-gegeven-werkboeken">Exctractie van werkbare data uit gegeven werkboeken</a>
  <ul class="collapse">
  <li><a href="#warmte-co2-data" id="toc-warmte-co2-data" class="nav-link" data-scroll-target="#warmte-co2-data">Warmte &amp; CO<sub>2</sub> data</a></li>
  </ul></li>
  <li><a href="#find_production_column_names" id="toc-find_production_column_names" class="nav-link" data-scroll-target="#find_production_column_names">find_production_column_names</a></li>
  <li><a href="#extract_production_column_names" id="toc-extract_production_column_names" class="nav-link" data-scroll-target="#extract_production_column_names">extract_production_column_names</a>
  <ul class="collapse">
  <li><a href="#emissie-data" id="toc-emissie-data" class="nav-link" data-scroll-target="#emissie-data">Emissie data</a></li>
  </ul></li>
  <li><a href="#find_emission_column_names" id="toc-find_emission_column_names" class="nav-link" data-scroll-target="#find_emission_column_names">find_emission_column_names</a></li>
  <li><a href="#extract_emission_column_names" id="toc-extract_emission_column_names" class="nav-link" data-scroll-target="#extract_emission_column_names">extract_emission_column_names</a></li>
  <li><a href="#opschonen-van-data" id="toc-opschonen-van-data" class="nav-link" data-scroll-target="#opschonen-van-data">Opschonen van data</a></li>
  <li><a href="#resample_data" id="toc-resample_data" class="nav-link" data-scroll-target="#resample_data">resample_data</a></li>
  <li><a href="#co2-productie-1" id="toc-co2-productie-1" class="nav-link" data-scroll-target="#co2-productie-1">CO<sub>2</sub> productie</a></li>
  <li><a href="#calculate_pco2_production_from_data" id="toc-calculate_pco2_production_from_data" class="nav-link" data-scroll-target="#calculate_pco2_production_from_data">calculate_pco2_production_from_data</a></li>
  <li><a href="#emissie-ratio" id="toc-emissie-ratio" class="nav-link" data-scroll-target="#emissie-ratio">Emissie ratio</a></li>
  <li><a href="#calculate_emission_ratio" id="toc-calculate_emission_ratio" class="nav-link" data-scroll-target="#calculate_emission_ratio">calculate_emission_ratio</a></li>
  <li><a href="#uiteindelijke-berekenening-module" id="toc-uiteindelijke-berekenening-module" class="nav-link" data-scroll-target="#uiteindelijke-berekenening-module">Uiteindelijke berekenening module</a>
  <ul class="collapse">
  <li><a href="#we-volgen-even-de-werkboeken" id="toc-we-volgen-even-de-werkboeken" class="nav-link" data-scroll-target="#we-volgen-even-de-werkboeken">We volgen even de werkboeken</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#bc5-total_corrected_heat-0.2-1e-6-co2_binnen---co2_buiten" id="toc-bc5-total_corrected_heat-0.2-1e-6-co2_binnen---co2_buiten" class="nav-link" data-scroll-target="#bc5-total_corrected_heat-0.2-1e-6-co2_binnen---co2_buiten">BC5 = Total_corrected_heat * 0.2 /(1e-6 * (co2_binnen - co2_buiten))</a></li>
  <li><a href="#bd5-bc5-totaal_aantal_dieren" id="toc-bd5-bc5-totaal_aantal_dieren" class="nav-link" data-scroll-target="#bd5-bc5-totaal_aantal_dieren">BD5 = BC5 / (totaal_aantal_dieren)</a></li>
  <li><a href="#be5-bc5-8-nh3_binnen---nh3_buiten-1e6-24365-totaal_plaatsen---gesloten_plaatsen" id="toc-be5-bc5-8-nh3_binnen---nh3_buiten-1e6-24365-totaal_plaatsen---gesloten_plaatsen" class="nav-link" data-scroll-target="#be5-bc5-8-nh3_binnen---nh3_buiten-1e6-24365-totaal_plaatsen---gesloten_plaatsen">BE5 = BC5 8 (nh3_binnen - nh3_buiten) / 1e6 * 24*365 / (totaal_plaatsen - gesloten_plaatsen)</a>
  <ul>
  <li><a href="#berekening-volgens-wageningen" id="toc-berekening-volgens-wageningen" class="nav-link" data-scroll-target="#berekening-volgens-wageningen">Berekening volgens Wageningen</a></li>
  <li><a href="#calculate_emission" id="toc-calculate_emission" class="nav-link" data-scroll-target="#calculate_emission">calculate_emission</a></li>
  <li><a href="#airflow-from-co2" id="toc-airflow-from-co2" class="nav-link" data-scroll-target="#airflow-from-co2">Airflow from CO2</a></li>
  <li><a href="#analyse-worksheet-berekeningen" id="toc-analyse-worksheet-berekeningen" class="nav-link" data-scroll-target="#analyse-worksheet-berekeningen">Analyse worksheet berekeningen</a>
  <ul class="collapse">
  <li><a href="#nh3-emissie-berekend-kgdpljaar" id="toc-nh3-emissie-berekend-kgdpljaar" class="nav-link" data-scroll-target="#nh3-emissie-berekend-kgdpljaar">NH3 Emissie berekend [kg/dpl/jaar]</a></li>
  <li><a href="#debiet-berekend-m3uur" id="toc-debiet-berekend-m3uur" class="nav-link" data-scroll-target="#debiet-berekend-m3uur">Debiet berekend [m3/uur]</a></li>
  <li><a href="#warmteproductie-totaal-gecorrigeerd-door-temperatuur" id="toc-warmteproductie-totaal-gecorrigeerd-door-temperatuur" class="nav-link" data-scroll-target="#warmteproductie-totaal-gecorrigeerd-door-temperatuur">Warmteproductie (totaal, gecorrigeerd door temperatuur)</a></li>
  <li><a href="#warmteproductie-totaal-w" id="toc-warmteproductie-totaal-w" class="nav-link" data-scroll-target="#warmteproductie-totaal-w">Warmteproductie totaal [W]</a></li>
  </ul></li>
  <li><a href="#warmteproductie" id="toc-warmteproductie" class="nav-link" data-scroll-target="#warmteproductie">Warmteproductie</a>
  <ul class="collapse">
  <li><a href="#warmteproductie-categorie-melkvee" id="toc-warmteproductie-categorie-melkvee" class="nav-link" data-scroll-target="#warmteproductie-categorie-melkvee">Warmteproductie categorie melkvee</a></li>
  </ul></li>
  <li><a href="#calculatie-vergelijking-met-voorbeeld-data" id="toc-calculatie-vergelijking-met-voorbeeld-data" class="nav-link" data-scroll-target="#calculatie-vergelijking-met-voorbeeld-data">Calculatie vergelijking met voorbeeld data</a>
  <ul class="collapse">
  <li><a href="#standaard-parameters" id="toc-standaard-parameters" class="nav-link" data-scroll-target="#standaard-parameters">Standaard parameters</a></li>
  <li><a href="#parameters-importeren" id="toc-parameters-importeren" class="nav-link" data-scroll-target="#parameters-importeren">Parameters importeren</a></li>
  <li><a href="#data-importeren" id="toc-data-importeren" class="nav-link" data-scroll-target="#data-importeren">Data importeren</a></li>
  </ul></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/fenke/openstal/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div><div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="stal_massabalans.html.pdf"><i class="bi bi-file-pdf"></i>Typst</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">


<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Barn Mass Balance</h1>
</div>

<div>
  <div class="description">
    Mass balance calculations for a barn following Wageningen UR model.
  </div>
</div>


<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->
<div id="37bffa7a" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os, json</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<section id="achtergrond" class="level2">
<h2 class="anchored" data-anchor-id="achtergrond">Achtergrond</h2>
<p>In Nederland is men momenteel vooral geïnteresseerd in de emissie uit stallen met dieren. We kunnen onderscheid maken tussen 2 type stallen: de natuurlijk geventileerde stallen (open stallen) en de mechanisch geventileerde stallen (gesloten stallen). Over het algemeen zitten melkkoeien (en -geiten) in open stallen en zitten de intensievere dieren (pluimvee, varkens, kalveren) in gesloten stallen.</p>
<section id="emissieberekening" class="level3">
<h3 class="anchored" data-anchor-id="emissieberekening">Emissieberekening</h3>
<p>Emissie wordt berekend door de gemeten concentratie van een bepaalde stof te vermenigvuldigen met het ventilatiedebiet. De eenheid van emissie wordt uitgedrukt in massa/tijdseenheid” (zoals kg/uur).</p>
</section>
<section id="concentratiemeting" class="level3">
<h3 class="anchored" data-anchor-id="concentratiemeting">Concentratiemeting</h3>
<p>De concentratie van de stof wordt gemeten met sensoren. Deze worden op bepaalde plekken bij de luchtinlaat en luchtuitlaat van de stal gehangen. Er is een consensus dat de gemeten concentraties dan betrouwbaar en representatief zijn.</p>
</section>
<section id="ventilatiedebiet" class="level3">
<h3 class="anchored" data-anchor-id="ventilatiedebiet">Ventilatiedebiet</h3>
<section id="mechanisch-geventileerde-stallen" class="level4">
<h4 class="anchored" data-anchor-id="mechanisch-geventileerde-stallen">Mechanisch geventileerde stallen</h4>
<p>In mechanisch geventileerde stallen wordt het ventilatiedebiet bepaald met behulp van meetwaaiers. Deze meetwaaiers worden op ventilatoren geplaatst en kunnen meten hoeveel lucht er per tijdseenheid door de ventilator wordt geblazen. Omdat mechanisch geventileerde stallen maar één (of enkele) uitstroomopeningen hebben, kan op deze manier worden bepaald wat het totale ventilatiedebiet van een stal is. Er is een consensus dat het bepalen van ventilatiedebiet met behulp van meetwaaiers betrouwbaar en representatief is.</p>
</section>
<section id="natuurlijk-geventileerde-stallen" class="level4">
<h4 class="anchored" data-anchor-id="natuurlijk-geventileerde-stallen">Natuurlijk geventileerde stallen</h4>
<p>Natuurlijk geventileerde stallen zijn voornamelijk open, waardoor het niet mogelijk is om met meetwaaiers te bepalen wat het debiet van de stallen is. Daarom wordt bij deze stallen gebruik gemaakt van de CO<sub>2</sub> massabalans. Dit is een theoretische benadering gebaseerd op verschillende parameters die door de tijd heen kunnen veranderen.</p>
</section>
</section>
<section id="emissieberekening-met-co2-massabalans" class="level3">
<h3 class="anchored" data-anchor-id="emissieberekening-met-co2-massabalans">Emissieberekening met CO<sub>2</sub> massabalans</h3>
<p>De ratiomethode is een veelgebruikte methode om de emissie van ammoniak (NH<sub>3</sub>) in stallen te schatten. Deze methode maakt gebruik van de concentratie van CO<sub>2</sub> als tracergas, omdat CO<sub>2</sub> een relatief constante productie heeft in de stal en goed te berekenen en meten is. De basis van de ratiomethode is het idee dat de verhouding tussen de concentraties van CO<sub>2</sub> binnen en buiten de stal een indicatie geeft van het ventilatiedebiet en daarmee de totale emissie van NH<sub>3</sub>.</p>
<p>Een randvoorwaarde van de ratiomethode is dat de concentraties van NH<sub>3</sub> en het tracergas - in dit geval CO<sub>2</sub> - op dezelfde meetpunten en met dezelfde meetfrequentie gemeten moeten worden. Om een goede schatting van de emissie te verkrijgen is het van belang dat <em>de concentratieratio’s per meetpunt worden geschat en daarna een gemiddeld van deze waarden wordt genomen</em>, in plaats dan eerst een gemiddelde concentratie van al die punten te bepalen en daarna de ratiomethode te gebruiken.</p>
</section>
</section>
<section id="support-calculations" class="level2">
<h2 class="anchored" data-anchor-id="support-calculations">Support calculations</h2>
<section id="gas-density" class="level3">
<h3 class="anchored" data-anchor-id="gas-density">Gas density</h3>
<p>The density of a gas can be calculated using the ideal gas law: <span class="math display">\[
\rho = \frac{M p}{R \cdot T}
\]</span></p>
<p>where: * <span class="math inline">\(M\)</span> is the molar mass of the gas in kg/mol</p>
<ul>
<li><p><span class="math inline">\(p\)</span> is the pressure in Pascals</p></li>
<li><p><span class="math inline">\(T\)</span> is the temperature in Kelvin</p></li>
<li><p><span class="math inline">\(R\)</span> is the universal gas constant</p></li>
</ul>
<hr>
<p><a href="https://github.com/fenke/openstal/blob/main/openstal/modules/barn_mass_balance.py#L43" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="gas_density" class="level3">
<h3 class="anchored" data-anchor-id="gas_density">gas_density</h3>
<blockquote class="blockquote">
<pre><code> gas_density (P:float, T:float, ppm:float, molweight:float)</code></pre>
</blockquote>
<p><em>Calculates mass density in grams per cubic metre P : pressure in Pa T : temperature in degrees Kelvin ppm : measured parts per million molweight: molecular weight in grams per mole</em></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>P</td>
<td>float</td>
<td>pressure in Pascal</td>
</tr>
<tr class="even">
<td>T</td>
<td>float</td>
<td>temperature in Kelvin</td>
</tr>
<tr class="odd">
<td>ppm</td>
<td>float</td>
<td>measured parts per million</td>
</tr>
<tr class="even">
<td>molweight</td>
<td>float</td>
<td>molecular weight in grams per mole</td>
</tr>
</tbody>
</table>
</section>
<section id="gasconcentraties-in-de-lucht" class="level3">
<h3 class="anchored" data-anchor-id="gasconcentraties-in-de-lucht">Gasconcentraties in de lucht</h3>
<p>Concentraties van chemicaliën in de lucht worden meestal gemeten als de massa van chemicaliën (milligram, microgram, nanogram of picogram) per volume lucht (kubieke meter of kubieke voet). Concentraties kunnen ook worden uitgedrukt als delen per miljoen (ppm) of delen per miljard (ppb) door gebruik te maken van een conversiefactor. Deze conversiefactor is gebaseerd op het moleculair gewicht van de chemische stof en is voor elke chemische stof verschillend. Typisch worden conversies voor chemicaliën in de lucht gemaakt met een veronderstelling van een druk van 1 atmosfeer en een temperatuur van 25 graden Celsius. Voor deze omstandigheden is de vergelijking om te converteren van concentratie in delen per miljoen naar concentratie in milligram per kubieke meter (mg/m3) als volgt:</p>
<p><span class="math display">\[  \text{Concentratie (mg/m3)} = 0.0409    \times  \text{concentratie (ppm)}   \times  \text{moleculair gewicht}\]</span></p>
<section id="concentrations-of-chemicals" class="level4">
<h4 class="anchored" data-anchor-id="concentrations-of-chemicals">Concentrations of chemicals</h4>
<p>Concentrations of chemicals in the air are usually measured as the mass of chemicals (milligrams, micrograms, nanograms or picograms) per volume of air (cubic meters or cubic feet). Concentrations can also be expressed as parts per million (ppm) or parts per billion (ppb) by using a conversion factor. This conversion factor is based on the molecular weight of the chemical and it is different for every chemical. The temperature of the atmosphere also has an influence on the calculation.</p>
<p>Typically, conversions for chemicals in air are made as suming a pressure of 1 atmosphere and a temperature of 25 degrees Celsius. For these conditions, the equation to convert from concentration in parts per million to con centration in milligrams per cubic meter (mg/m3) is as follows: <span class="math display">\[
\text{Concentration (mg/m3)} = 0.0409 \times \text{concentration (ppm)} \times \text{molecular weight}
\]</span></p>
</section>
<section id="functie-implementatie" class="level4">
<h4 class="anchored" data-anchor-id="functie-implementatie">Functie implementatie</h4>
<hr>
<p><a href="https://github.com/fenke/openstal/blob/main/openstal/modules/barn_mass_balance.py#L59" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
</section>
<section id="gas_density_from_sensor_measurment" class="level3">
<h3 class="anchored" data-anchor-id="gas_density_from_sensor_measurment">gas_density_from_sensor_measurment</h3>
<blockquote class="blockquote">
<pre><code> gas_density_from_sensor_measurment (ppm:float, molweight:float)</code></pre>
</blockquote>
<p><em>Calculates mass density in milligrams per cubic metre</em></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>ppm</td>
<td>float</td>
<td>measured parts per million</td>
</tr>
<tr class="even">
<td>molweight</td>
<td>float</td>
<td>molecular weight in grams per mole</td>
</tr>
</tbody>
</table>
</section>
<section id="co2-productie" class="level3">
<h3 class="anchored" data-anchor-id="co2-productie">CO<sub>2</sub> productie</h3>
<p>De CO<sub>2</sub> productie in een stal (in m<sup>3</sup> / uur) kan worden berekend met behulp van de volgende formules voor melkvee en pinken</p>
<section id="melkvee" class="level4">
<h4 class="anchored" data-anchor-id="melkvee">Melkvee</h4>
<p><span class="math display">\[
P CO_2 = 0.2 \frac{5.6 m^{0.75} + 22 Y_1 + 1.6 \times 10^{-5} p^3}{1000}
\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(m\)</span> is the live weight in kg</li>
<li><span class="math inline">\(Y_1\)</span> is the daily milk production in kg per dier per dag</li>
<li><span class="math inline">\(p\)</span> number of dracht dagen</li>
</ul>
<section id="functie-implementatie-1" class="level5">
<h5 class="anchored" data-anchor-id="functie-implementatie-1">Functie implementatie</h5>
<hr>
<p><a href="https://github.com/fenke/openstal/blob/main/openstal/modules/barn_mass_balance.py#L70" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
</section>
</section>
<section id="pco2_melkvee" class="level3">
<h3 class="anchored" data-anchor-id="pco2_melkvee">PCO2_melkvee</h3>
<blockquote class="blockquote">
<pre><code> PCO2_melkvee (aantal, melkproductie, drachtdagen, gewicht)</code></pre>
</blockquote>
<p><em>CO2 productie van melkvee per dier per dag gewicht: (gemiddelde) gewicht van de dieren melkproductie: melkproductie in kg per dier per dag drachtdagen: gemiddelde drachttijd (in dagen) De defaults zijn voor droogstaande koeien</em></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>aantal</td>
<td>number of animals</td>
</tr>
<tr class="even">
<td>melkproductie</td>
<td>milk production in kg per animal per day</td>
</tr>
<tr class="odd">
<td>drachtdagen</td>
<td>days carrying (average)</td>
</tr>
<tr class="even">
<td>gewicht</td>
<td>average weight of the animals in kg</td>
</tr>
</tbody>
</table>
<div id="f6e9ed4b" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>test_args_melkvee <span class="op">=</span> <span class="bu">dict</span>(</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    aantal<span class="op">=</span><span class="dv">130</span>,</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    melkproductie<span class="op">=</span><span class="dv">28</span>,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    drachtdagen<span class="op">=</span><span class="dv">160</span>,</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    gewicht<span class="op">=</span><span class="dv">650</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>PCO2_melkvee(<span class="op">**</span>test_args_melkvee)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<pre><code>np.float64(36.46325050213528)</code></pre>
</div>
</div>
<div id="10a9dd35" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>test_args_droog <span class="op">=</span> <span class="bu">dict</span>(</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    aantal<span class="op">=</span><span class="dv">6</span>,</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    melkproductie<span class="op">=</span><span class="dv">0</span>,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    drachtdagen<span class="op">=</span><span class="dv">220</span>,</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    gewicht<span class="op">=</span><span class="dv">650</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>PCO2_melkvee(<span class="op">**</span>test_args_droog)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<pre><code>np.float64(1.0695176539447053)</code></pre>
</div>
</div>
<section id="pinken" class="level4">
<h4 class="anchored" data-anchor-id="pinken">Pinken</h4>
<p><span class="math display">\[
P CO_2 = 0.2 \frac{7.64 m^{0.69} + Y_2 (\frac{23}{M} - 1) (\frac{57.27 + 0.302 m}{1 - 0.171 Y_2})  + 1.6 \times 10^{-5} p^3}{1000}
\]</span></p>
<p>Where:</p>
<ul>
<li><p><span class="math inline">\(m\)</span> is the live weight in kg</p></li>
<li><p><span class="math inline">\(M\)</span> is the energy content of their food in MJ per kg</p></li>
<li><p><span class="math inline">\(Y_2\)</span> is the daily weight gain in kg per dier per dag</p></li>
<li><p><span class="math inline">\(p\)</span> number of dracht dagen</p></li>
</ul>
<section id="functie-implementatie-2" class="level5">
<h5 class="anchored" data-anchor-id="functie-implementatie-2">Functie implementatie</h5>
<hr>
<p><a href="https://github.com/fenke/openstal/blob/main/openstal/modules/barn_mass_balance.py#L89" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
</section>
</section>
<section id="pco2_pinken" class="level3">
<h3 class="anchored" data-anchor-id="pco2_pinken">PCO2_pinken</h3>
<blockquote class="blockquote">
<pre><code> PCO2_pinken (aantal, energievoeding, drachtdagen, gewicht,
              gewichtstoename)</code></pre>
</blockquote>
<p><em>CO2 productie van pinken</em></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>aantal</td>
<td>number of animals</td>
</tr>
<tr class="even">
<td>energievoeding</td>
<td>energy feed</td>
</tr>
<tr class="odd">
<td>drachtdagen</td>
<td>days carrying (average)</td>
</tr>
<tr class="even">
<td>gewicht</td>
<td>average weight of the animals in kg</td>
</tr>
<tr class="odd">
<td>gewichtstoename</td>
<td>average weight gain of the animals in kg per day</td>
</tr>
</tbody>
</table>
<div id="83ba3b6c" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>test_args_pinken <span class="op">=</span> <span class="bu">dict</span>(</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    aantal<span class="op">=</span><span class="dv">0</span>,</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    energievoeding<span class="op">=</span><span class="dv">10</span>,</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    drachtdagen<span class="op">=</span><span class="dv">140</span>,</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    gewicht<span class="op">=</span><span class="dv">400</span>,</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    gewichtstoename<span class="op">=</span><span class="fl">0.6</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>PCO2_pinken(<span class="op">**</span>test_args_pinken)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<pre><code>np.float64(0.0)</code></pre>
</div>
</div>
<div id="2f1ec840" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>test_args_pinken_niet_drachtig <span class="op">=</span> <span class="bu">dict</span>(</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    aantal<span class="op">=</span><span class="dv">0</span>,</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    energievoeding<span class="op">=</span><span class="dv">10</span>,</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    drachtdagen<span class="op">=</span><span class="dv">0</span>,</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    gewicht<span class="op">=</span><span class="dv">250</span>,</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    gewichtstoename<span class="op">=</span><span class="fl">0.6</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>PCO2_pinken(<span class="op">**</span>test_args_pinken_niet_drachtig)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<pre><code>np.float64(0.0)</code></pre>
</div>
</div>
<section id="temperatuur-correctie" class="level4">
<h4 class="anchored" data-anchor-id="temperatuur-correctie">Temperatuur correctie</h4>
<p>Temperatuur heeft invloed op spijsveetering en gedrag en daarmee op de CO<sub>2</sub> productie, correctie kan worden toegepast met de volgende formule:</p>
<p><span class="math display">\[
P CO_2 (T) = P CO_2 \times (1000  + 4 \times (20 - T_{stal})) / 1000
\]</span></p>
<hr>
<p><a href="https://github.com/fenke/openstal/blob/main/openstal/modules/barn_mass_balance.py#L117" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
</section>
<section id="pco2_temperatuurcorrectie" class="level3">
<h3 class="anchored" data-anchor-id="pco2_temperatuurcorrectie">PCO2_temperatuurcorrectie</h3>
<blockquote class="blockquote">
<pre><code> PCO2_temperatuurcorrectie (pco2, temperatuur)</code></pre>
</blockquote>
<p><em>Bereken temperatuur correctie voor de CO2 productie</em></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>pco2</td>
<td>calculated CO2 production in cubic meters per hour</td>
</tr>
<tr class="even">
<td>temperatuur</td>
<td>temperature in the barn in degrees Celsius</td>
</tr>
</tbody>
</table>
<hr>
<p><a href="https://github.com/fenke/openstal/blob/main/openstal/modules/barn_mass_balance.py#L113" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="calculate_temperatuur_correctie" class="level3">
<h3 class="anchored" data-anchor-id="calculate_temperatuur_correctie">calculate_temperatuur_correctie</h3>
<blockquote class="blockquote">
<pre><code> calculate_temperatuur_correctie (temperatuur)</code></pre>
</blockquote>
<p><em>Calculate temperature correction factor for CO2 production</em></p>
<section id="pco2-functie-categorie-mapping" class="level4">
<h4 class="anchored" data-anchor-id="pco2-functie-categorie-mapping">PcO<sub>2</sub> functie categorie mapping</h4>
<div id="4b35059c" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="bu">dict</span>(inspect.signature(PCO2_melkvee).parameters)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<pre><code>{'aantal': &lt;Parameter "aantal"&gt;,
 'melkproductie': &lt;Parameter "melkproductie"&gt;,
 'drachtdagen': &lt;Parameter "drachtdagen"&gt;,
 'gewicht': &lt;Parameter "gewicht"&gt;}</code></pre>
</div>
</div>
<div id="bbfd140b" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>pco2_category_functions_parameters</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<pre><code>{'melkvee': {'aantal': &lt;Parameter "aantal"&gt;,
  'melkproductie': &lt;Parameter "melkproductie"&gt;,
  'drachtdagen': &lt;Parameter "drachtdagen"&gt;,
  'gewicht': &lt;Parameter "gewicht"&gt;},
 'droogstaande koeien': {'aantal': &lt;Parameter "aantal"&gt;,
  'melkproductie': &lt;Parameter "melkproductie"&gt;,
  'drachtdagen': &lt;Parameter "drachtdagen"&gt;,
  'gewicht': &lt;Parameter "gewicht"&gt;},
 'drachtig jongvee': {'aantal': &lt;Parameter "aantal"&gt;,
  'energievoeding': &lt;Parameter "energievoeding"&gt;,
  'drachtdagen': &lt;Parameter "drachtdagen"&gt;,
  'gewicht': &lt;Parameter "gewicht"&gt;,
  'gewichtstoename': &lt;Parameter "gewichtstoename"&gt;},
 'niet drachtig jongvee': {'aantal': &lt;Parameter "aantal"&gt;,
  'energievoeding': &lt;Parameter "energievoeding"&gt;,
  'drachtdagen': &lt;Parameter "drachtdagen"&gt;,
  'gewicht': &lt;Parameter "gewicht"&gt;,
  'gewichtstoename': &lt;Parameter "gewichtstoename"&gt;}}</code></pre>
</div>
</div>
</section>
<section id="pco2-parameters" class="level4">
<h4 class="anchored" data-anchor-id="pco2-parameters">PCO<sub>2</sub> Parameters</h4>
<p>Voor het CO2-productiemodel zijn een aantal productiegegevens nodig. Melkproductie en –samenstelling worden altijd gemeten en gerapporteerd. De andere benodigde parameters (diergewicht, dagen in dracht, en voor jongvee de energiewaarde van het voer en gewichtstoename), worden bij voorkeur op basis van metingen op de bedrijfslocaties vastgesteld. Wanneer deze niet beschikbaar zijn dienen de volgende standaardwaarden voor te worden gebruikt.</p>
<div id="3e2946cf" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>pd.DataFrame(_default_parameters).set_index(<span class="st">'categorie'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">gewicht</th>
<th data-quarto-table-cell-role="th">drachtdagen</th>
<th data-quarto-table-cell-role="th">melkproductie</th>
<th data-quarto-table-cell-role="th">energievoeding</th>
<th data-quarto-table-cell-role="th">gewichtstoename</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">categorie</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">melkvee</th>
<td>650</td>
<td>160</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">droogstaande koeien</th>
<td>650</td>
<td>220</td>
<td>0.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">drachtig jongvee</th>
<td>400</td>
<td>140</td>
<td>NaN</td>
<td>10.0</td>
<td>0.6</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">niet drachtig jongvee</th>
<td>250</td>
<td>0</td>
<td>NaN</td>
<td>10.0</td>
<td>0.6</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="b28c4d6b" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(json.dumps(default_pco2_parameters, indent<span class="op">=</span><span class="dv">4</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>{
    "melkvee": {
        "gewicht": 650,
        "drachtdagen": 160
    },
    "droogstaande koeien": {
        "gewicht": 650,
        "drachtdagen": 220,
        "melkproductie": 0
    },
    "drachtig jongvee": {
        "gewicht": 400,
        "drachtdagen": 140,
        "energievoeding": 10.0,
        "gewichtstoename": 0.6
    },
    "niet drachtig jongvee": {
        "gewicht": 250,
        "drachtdagen": 0,
        "energievoeding": 10.0,
        "gewichtstoename": 0.6
    }
}</code></pre>
</div>
</div>
<hr>
<p><a href="https://github.com/fenke/openstal/blob/main/openstal/modules/barn_mass_balance.py#L175" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
</section>
<section id="create_pco2_function_mapping_from_parameters" class="level3">
<h3 class="anchored" data-anchor-id="create_pco2_function_mapping_from_parameters">create_pco2_function_mapping_from_parameters</h3>
<blockquote class="blockquote">
<pre><code> create_pco2_function_mapping_from_parameters (pco2_parameters)</code></pre>
</blockquote>
<p><em>Create a mapping of category to PCO2 calculation functions</em></p>
<hr>
<p><a href="https://github.com/fenke/openstal/blob/main/openstal/modules/barn_mass_balance.py#L212" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="pco2_calculation_from_mapping" class="level3">
<h3 class="anchored" data-anchor-id="pco2_calculation_from_mapping">PCO2_calculation_from_mapping</h3>
<blockquote class="blockquote">
<pre><code> PCO2_calculation_from_mapping (mapping, category, aantal, **kwargs)</code></pre>
</blockquote>
</section>
<section id="test-berekeningen" class="level3">
<h3 class="anchored" data-anchor-id="test-berekeningen">Test berekeningen</h3>
</section>
<section id="emissie-berekeningen" class="level3">
<h3 class="anchored" data-anchor-id="emissie-berekeningen">Emissie berekeningen</h3>
<section id="ratiomethode" class="level4">
<h4 class="anchored" data-anchor-id="ratiomethode">Ratiomethode</h4>
<p>De ammoniakemissies (E<sub>i</sub>; in kg/jaar per dierplaats) worden per meetdag <span class="math inline">\(i\)</span> bepaald op basis van de geschatte CO<sub>2</sub> - productie in de stal (PCO<sub>2i</sub>; in m<sup>3</sup> CO<sub>2</sub> /uur), en de gemiddelde concentratieratio van CO<sub>2</sub> en NH<sub>3</sub> als CR<sub>i</sub> over alle meetpunten m waar CO<sub>2</sub> - en NH<sub>3</sub> concentraties tegelijkertijd in de stal gemeten zijn:</p>
<p><span class="math display">\[
E_i = PCO_{2i} \cdot CR_i
\]</span></p>
<p>Voor <span class="math inline">\(CR_i\)</span></p>
<p><span class="math display">\[
CR_i = \frac{1}{m} \sum_{m} \frac{(NH_{3})_{im}^{stal} - (\overline{NH_{3}})_i^{buiten} }{(CO_{2})_{im}^{stal} - (\overline{CO_{2}})_i^{buiten}  }
\]</span></p>
<p><span class="math display">\[
\overline{X_{i}^{buiten}} = \sum_{m} X_{i}^{buiten}
\]</span></p>
<p>Waarin</p>
<dl>
<dt><span class="math inline">\(X_{im}^{stal}\)</span></dt>
<dd>
het 24-uurs gemiddelde van de concentratie van stof <span class="math inline">\(X\)</span> in stal op meetdag <span class="math inline">\(i\)</span> en op meetpunt <span class="math inline">\(m\)</span>
</dd>
<dt><span class="math inline">\(X_{im}^{buiten}\)</span></dt>
<dd>
het 24-uurs gemiddelde van de concentratie van stof <span class="math inline">\(X\)</span> in de ingaande lucht op meetdag <span class="math inline">\(i\)</span> en op meetpunt <span class="math inline">\(m\)</span>
</dd>
<dt><span class="math inline">\(\overline{X_{i}^{buiten}}\)</span></dt>
<dd>
het 24-uurs gemiddelde van de concentratie van stof <span class="math inline">\(X\)</span> in de ingaande lucht op meetdag <span class="math inline">\(i\)</span> over alle meetpunten
</dd>
</dl>
<p><span class="math display">\[
\overline{(NH_{3})}_{i}^{buiten} = \frac{1}{m} \sum_{m} (NH_{3})_{i}^{buiten}
\]</span></p>
<p>and <span class="math display">\[
\overline{CO_{2i}}^{buiten} = \frac{1}{n} \sum_{k=1}^{n} (CO_{2})_{ik}^{buiten}
\]</span></p>
</section>
<section id="ratiomethode-met-twee-meetpunten" class="level4">
<h4 class="anchored" data-anchor-id="ratiomethode-met-twee-meetpunten">Ratiomethode met twee meetpunten</h4>
<p>Wanneer er slechts twee meetpunten zijn, een binnen en een buiten, dan vervalt de berekening van de gemiddelden over meetpunten en kan de emissie worden berekend met de vereenvoudiging van <span class="math inline">\(CR_i\)</span>:</p>
<p><span class="math display">\[
CR_i = \frac{(NH_{3})_{i}^{stal} - (NH_{3})_{i}^{buiten} }{(CO_{2})_{i}^{stal} - CO_{2i}^{buiten} }
\]</span></p>
<p>en</p>
<p><span class="math display">\[
E_i = PCO_{2i} \cdot CR_i
\]</span></p>
<p>wordt</p>
<p><span class="math display">\[
E_i = PCO_{2i} \cdot \frac{(NH_{3})_{i}^{stal} - (NH_{3})_{i}^{buiten} }{(CO_{2})_{i}^{stal} - CO_{2i}^{buiten} }
\]</span></p>
</section>
</section>
</section>
<section id="implementatie-ratiomethode" class="level2">
<h2 class="anchored" data-anchor-id="implementatie-ratiomethode">Implementatie ratiomethode</h2>
<p>We verwachten dat de gebruiker de volgende data als timeseries dataframe aanlevert:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 20%">
<col style="width: 55%">
<col style="width: 23%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Kolomnaam</th>
<th style="text-align: left;">Omschrijving</th>
<th style="text-align: left;">Eenheid</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">CO2_stal</td>
<td style="text-align: left;">CO2 concentratie in de stal in ppm</td>
<td style="text-align: left;">ppm</td>
</tr>
<tr class="even">
<td style="text-align: left;">CO2_buiten</td>
<td style="text-align: left;">CO2 concentratie buiten de stal in ppm</td>
<td style="text-align: left;">ppm</td>
</tr>
<tr class="odd">
<td style="text-align: left;">NH3_stal</td>
<td style="text-align: left;">NH3 concentratie in de stal in ppm</td>
<td style="text-align: left;">ppm</td>
</tr>
<tr class="even">
<td style="text-align: left;">NH3_buiten</td>
<td style="text-align: left;">NH3 concentratie buiten de stal in ppm</td>
<td style="text-align: left;">ppm</td>
</tr>
<tr class="odd">
<td style="text-align: left;">temperatuur</td>
<td style="text-align: left;">Temperatuur in de stal in Celcius</td>
<td style="text-align: left;">°C</td>
</tr>
</tbody>
</table>
<p>Daarnaast verwachten we dat de gebruiker de volgende gegevens meegeeft</p>
<dl>
<dt>bezetting</dt>
<dd>
aantal dieren in de stal per categorie als dictionary met categorie als key en aantal als value
</dd>
<dt>parameters</dt>
<dd>
dictionary met de parameters voor de verschillende categorieën. Missende waardes voor parameters worden aangevult uit de volgende standaard parameters:
</dd>
</dl>
<div id="ba16a871" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>pd.DataFrame(default_pco2_parameters).transpose()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">gewicht</th>
<th data-quarto-table-cell-role="th">drachtdagen</th>
<th data-quarto-table-cell-role="th">melkproductie</th>
<th data-quarto-table-cell-role="th">energievoeding</th>
<th data-quarto-table-cell-role="th">gewichtstoename</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">melkvee</th>
<td>650.0</td>
<td>160.0</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">droogstaande koeien</th>
<td>650.0</td>
<td>220.0</td>
<td>0.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">drachtig jongvee</th>
<td>400.0</td>
<td>140.0</td>
<td>NaN</td>
<td>10.0</td>
<td>0.6</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">niet drachtig jongvee</th>
<td>250.0</td>
<td>0.0</td>
<td>NaN</td>
<td>10.0</td>
<td>0.6</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<section id="externe-data" class="level3">
<h3 class="anchored" data-anchor-id="externe-data">Externe data</h3>
<p>Data voor verificatie van de implementatie wordt veelal aangeleverd in excel werkboeken. Deze data kan worden ingelezen en aangepast aan onze behoeften.</p>
<section id="vera-data" class="level4">
<h4 class="anchored" data-anchor-id="vera-data">VERA data</h4>
<div id="f45a0371" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>vera_data_filename <span class="op">=</span> os.path.join(os.getcwd(), <span class="st">'..'</span>, <span class="st">'data'</span>, <span class="st">'massabalans'</span>, <span class="st">'Rekenbestand emissie VERA.xlsx'</span>)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>vera_dataframe <span class="op">=</span> pd.read_excel(</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>    vera_data_filename, </span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    sheet_name<span class="op">=</span><span class="st">'Emissions (daily means)'</span>, </span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    header<span class="op">=</span><span class="dv">3</span>, </span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>    index_col<span class="op">=</span><span class="dv">7</span>, </span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>    parse_dates<span class="op">=</span><span class="va">True</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>).drop([</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">' C1:                  cows &gt;= 70%'</span>,</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">'C2:                          Occupation rate &gt;= 90%'</span>,</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">'C3:                                                             milk production &gt; 25'</span>,</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">' C1:                  heifers &lt; 30%'</span>,</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">'C2:                          Occupation rate &gt;= 80%'</span>,</span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">'C3:                                                             milk production &gt; 25.1'</span>,</span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">'C4:                                      urea content in milk &gt; 15'</span>,</span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">'C5:                            dry cows &lt; 25%'</span>], axis<span class="op">=</span><span class="dv">1</span></span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>).dropna(axis<span class="op">=</span><span class="dv">1</span>, how<span class="op">=</span><span class="st">'all'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div id="b0378775" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>vera_dataframe.info()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
DatetimeIndex: 60 entries, 2011-04-04 to 2012-02-16
Data columns (total 55 columns):
 #   Column                                                 Non-Null Count  Dtype  
---  ------                                                 --------------  -----  
 0   Measurement institute                                  60 non-null     object 
 1   Animal Category                                        60 non-null     object 
 2   Housing system                                         60 non-null     object 
 3   Measurement location                                   60 non-null     object 
 4   Measurement period                                     60 non-null     int64  
 5   Measurement day (in period)                            60 non-null     int64  
 6   Day in year                                            60 non-null     int64  
 7   Outside temperature [oC]                               24 non-null     float64
 8   Outside RH [%]                                         23 non-null     float64
 9   Inside temperature [oC]                                59 non-null     float64
 10  Inside RH [%]                                          44 non-null     float64
 11  Animal places                                          60 non-null     int64  
 12  Milking cows                                           60 non-null     int64  
 13  Dry cows                                               60 non-null     int64  
 14  Heifers (pregnant)                                     60 non-null     int64  
 15  Heifers (not pregnant)                                 60 non-null     int64  
 16  Floor type (0: slatted floor; 1: closed floor)         60 non-null     int64  
 17  Walking area per animal (m2)                           60 non-null     float64
 18  Grazing (hours per day)                                60 non-null     int64  
 19  Closed cubicles                                        60 non-null     int64  
 20  Milk production [kg/animal/day]                        56 non-null     float64
 21  Milk [% protein]                                       60 non-null     float64
 22  Milk [% fat]                                           60 non-null     float64
 23  Urea content in milk [mg/100g]                         56 non-null     float64
 24  Weight milking cows [kg]                               60 non-null     int64  
 25  Weight dry cows [kg]                                   60 non-null     int64  
 26  Weight heifers (pregnant) [kg]                         60 non-null     int64  
 27  Weight heifers (not pregnant) [kg]                     60 non-null     int64  
 28  Days in pregnancy (milking cows)                       60 non-null     int64  
 29  Days in pregnancy (dry cows)                           60 non-null     int64  
 30  Days in pregnancy (heifers)                            60 non-null     int64  
 31  Energy value of feed (heifers; MJ/kg dry matter)       60 non-null     int64  
 32  Weight gain heifers [kg/day]                           60 non-null     float64
 33  CO2 inside [ppm]                                       60 non-null     int64  
 34  CO2 outside [ppm]                                      52 non-null     float64
 35  NH3 inside [mg/m3]                                     33 non-null     float64
 36  NH3 outside [mg/m3]                                    60 non-null     int64  
 37  Number of animals                                      60 non-null     int64  
 38  Dairy cows (milking + dry)                             60 non-null     int64  
 39  % closed cubicles                                      60 non-null     float64
 40  Occupation rate (%)                                    60 non-null     float64
 41  Dairy cows (%)                                         60 non-null     float64
 42  Heifers vs. dairy cows (%)                             60 non-null     float64
 43  Dry cows vs. dairy cows (%)                            60 non-null     float64
 44  Heat production milking cows (hpu)                     56 non-null     float64
 45  Heat production dry cows (hpu)                         56 non-null     float64
 46  Heat production heifers (pregnant) (hpu)               60 non-null     float64
 47  Heat production heifers (not pregnant) (hpu)           60 non-null     float64
 48  Total heat production (hpu)                            60 non-null     float64
 49  Total heat production corrected for temperature (hpu)  59 non-null     float64
 50  Ventilation rate [m3/h]                                51 non-null     float64
 51  Ventilation rate [m3/h per animal]                     51 non-null     float64
 52  NH3 Emission [kg/year per animal place]                32 non-null     float64
 53  Summary                                                32 non-null     float64
 54  Summary.1                                              32 non-null     float64
dtypes: float64(28), int64(23), object(4)
memory usage: 26.2+ KB</code></pre>
</div>
</div>
</section>
</section>
<section id="exctractie-van-werkbare-data-uit-gegeven-werkboeken" class="level3">
<h3 class="anchored" data-anchor-id="exctractie-van-werkbare-data-uit-gegeven-werkboeken">Exctractie van werkbare data uit gegeven werkboeken</h3>
<section id="warmte-co2-data" class="level4">
<h4 class="anchored" data-anchor-id="warmte-co2-data">Warmte &amp; CO<sub>2</sub> data</h4>
<div id="6bc06ef8" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> vera_dataframe.copy()</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>datacolumns <span class="op">=</span> <span class="bu">set</span>(data.columns)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<hr>
<p><a href="https://github.com/fenke/openstal/blob/main/openstal/modules/barn_mass_balance.py#L238" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
</section>
<section id="find_production_column_names" class="level3">
<h3 class="anchored" data-anchor-id="find_production_column_names">find_production_column_names</h3>
<blockquote class="blockquote">
<pre><code> find_production_column_names (data:pandas.core.frame.DataFrame)</code></pre>
</blockquote>
<p><em>Find the column names for the co2 production columns in the VERA data</em></p>
<div id="795ce4c4" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(json.dumps(find_production_column_names(vera_dataframe), indent<span class="op">=</span><span class="dv">3</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>{
   "drachtdagen": [
      "Days in pregnancy (heifers)",
      "Days in pregnancy (dry cows)",
      "Days in pregnancy (milking cows)"
   ],
   "energievoeding": [
      "Energy value of feed (heifers; MJ/kg dry matter)"
   ],
   "melkproductie": [
      "Milk production [kg/animal/day]"
   ],
   "gewichtstoename": [
      "Weight gain heifers [kg/day]"
   ],
   "gewicht": [
      "Weight heifers (pregnant) [kg]",
      "Weight heifers (not pregnant) [kg]",
      "Weight milking cows [kg]",
      "Weight dry cows [kg]"
   ],
   "remaining_columns": [
      "Dry cows vs. dairy cows (%)",
      "Closed cubicles",
      "NH3 outside [mg/m3]",
      "Summary.1",
      "Day in year",
      "% closed cubicles",
      "Housing system",
      "Animal Category",
      "CO2 outside [ppm]",
      "NH3 Emission [kg/year per animal place]",
      "Animal places",
      "NH3 inside [mg/m3]",
      "Ventilation rate [m3/h]",
      "CO2 inside [ppm]",
      "Dairy cows (milking + dry)",
      "Number of animals",
      "Total heat production corrected for temperature (hpu)",
      "Grazing (hours per day)",
      "Heat production heifers (pregnant) (hpu)",
      "Measurement period",
      "Total heat production (hpu)",
      "Measurement institute",
      "Milk [% protein]",
      "Urea content in milk [mg/100g]",
      "Heifers (not pregnant)",
      "Measurement day (in period)",
      "Occupation rate (%)",
      "Heifers vs. dairy cows (%)",
      "Heat production milking cows (hpu)",
      "Walking area per animal (m2)",
      "Dairy cows (%)",
      "Measurement location",
      "Ventilation rate [m3/h per animal]",
      "Floor type (0: slatted floor; 1: closed floor)",
      "Outside RH [%]",
      "Outside temperature [oC]",
      "Summary",
      "Heat production heifers (not pregnant) (hpu)",
      "Heifers (pregnant)",
      "Milk [% fat]",
      "Dry cows",
      "Inside temperature [oC]",
      "Heat production dry cows (hpu)",
      "Milking cows",
      "Inside RH [%]"
   ]
}</code></pre>
</div>
</div>
<div id="2c2782f6" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(json.dumps(default_pco2_parameters, indent<span class="op">=</span><span class="dv">4</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>{
    "melkvee": {
        "gewicht": 650,
        "drachtdagen": 160
    },
    "droogstaande koeien": {
        "gewicht": 650,
        "drachtdagen": 220,
        "melkproductie": 0
    },
    "drachtig jongvee": {
        "gewicht": 400,
        "drachtdagen": 140,
        "energievoeding": 10.0,
        "gewichtstoename": 0.6
    },
    "niet drachtig jongvee": {
        "gewicht": 250,
        "drachtdagen": 0,
        "energievoeding": 10.0,
        "gewichtstoename": 0.6
    }
}</code></pre>
</div>
</div>
<hr>
<p><a href="https://github.com/fenke/openstal/blob/main/openstal/modules/barn_mass_balance.py#L282" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="extract_production_column_names" class="level3">
<h3 class="anchored" data-anchor-id="extract_production_column_names">extract_production_column_names</h3>
<blockquote class="blockquote">
<pre><code> extract_production_column_names (data:pandas.core.frame.DataFrame)</code></pre>
</blockquote>
<p><em>Extract column names for the co2 production columns from the DataFrame</em></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>data</td>
<td>DataFrame</td>
<td>DataFrame with measurement data</td>
</tr>
<tr class="even">
<td><strong>Returns</strong></td>
<td><strong>dict</strong></td>
<td></td>
</tr>
</tbody>
</table>
<div id="b47788e0" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(json.dumps(extract_production_column_names(vera_dataframe), indent<span class="op">=</span><span class="dv">4</span>)) <span class="co">#extract_production_column_names(vera_dataframe)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>{
    "melkvee": {
        "gewicht": [
            "Weight milking cows [kg]"
        ],
        "drachtdagen": [
            "Days in pregnancy (milking cows)"
        ],
        "melkproductie": [
            "Milk production [kg/animal/day]"
        ],
        "aantal": [
            "Milking cows"
        ]
    },
    "droogstaande koeien": {
        "gewicht": [
            "Weight dry cows [kg]"
        ],
        "drachtdagen": [
            "Days in pregnancy (dry cows)"
        ],
        "aantal": [
            "Dry cows"
        ]
    },
    "drachtig jongvee": {
        "gewicht": [
            "Weight heifers (pregnant) [kg]"
        ],
        "drachtdagen": [
            "Days in pregnancy (heifers)"
        ],
        "energievoeding": [
            "Energy value of feed (heifers; MJ/kg dry matter)"
        ],
        "gewichtstoename": [
            "Weight gain heifers [kg/day]"
        ],
        "aantal": [
            "Heifers (pregnant)"
        ]
    },
    "niet drachtig jongvee": {
        "gewicht": [
            "Weight heifers (not pregnant) [kg]"
        ],
        "energievoeding": [
            "Energy value of feed (heifers; MJ/kg dry matter)"
        ],
        "gewichtstoename": [
            "Weight gain heifers [kg/day]"
        ],
        "aantal": [
            "Heifers (not pregnant)"
        ]
    }
}</code></pre>
</div>
</div>
<div id="be785694" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(json.dumps(flatten_column_mapping(extract_production_column_names(vera_dataframe)), indent<span class="op">=</span><span class="dv">4</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[
    "Weight milking cows [kg]",
    "Days in pregnancy (milking cows)",
    "Milk production [kg/animal/day]",
    "Milking cows",
    "Weight dry cows [kg]",
    "Days in pregnancy (dry cows)",
    "Dry cows",
    "Weight heifers (pregnant) [kg]",
    "Days in pregnancy (heifers)",
    "Energy value of feed (heifers; MJ/kg dry matter)",
    "Weight gain heifers [kg/day]",
    "Heifers (pregnant)",
    "Weight heifers (not pregnant) [kg]",
    "Energy value of feed (heifers; MJ/kg dry matter)",
    "Weight gain heifers [kg/day]",
    "Heifers (not pregnant)"
]</code></pre>
</div>
</div>
<div id="4948b535" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>vera_dataframe[flatten_column_mapping(extract_production_column_names(vera_dataframe))]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Weight milking cows [kg]</th>
<th data-quarto-table-cell-role="th">Days in pregnancy (milking cows)</th>
<th data-quarto-table-cell-role="th">Milk production [kg/animal/day]</th>
<th data-quarto-table-cell-role="th">Milking cows</th>
<th data-quarto-table-cell-role="th">Weight dry cows [kg]</th>
<th data-quarto-table-cell-role="th">Days in pregnancy (dry cows)</th>
<th data-quarto-table-cell-role="th">Dry cows</th>
<th data-quarto-table-cell-role="th">Weight heifers (pregnant) [kg]</th>
<th data-quarto-table-cell-role="th">Days in pregnancy (heifers)</th>
<th data-quarto-table-cell-role="th">Energy value of feed (heifers; MJ/kg dry matter)</th>
<th data-quarto-table-cell-role="th">Weight gain heifers [kg/day]</th>
<th data-quarto-table-cell-role="th">Heifers (pregnant)</th>
<th data-quarto-table-cell-role="th">Weight heifers (not pregnant) [kg]</th>
<th data-quarto-table-cell-role="th">Energy value of feed (heifers; MJ/kg dry matter)</th>
<th data-quarto-table-cell-role="th">Weight gain heifers [kg/day]</th>
<th data-quarto-table-cell-role="th">Heifers (not pregnant)</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Date</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-04-04</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-04-05</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-04-06</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-06-06</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-06-07</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-06-08</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-08-02</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-08-03</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-08-04</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-10-06</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-10-07</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-10-08</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-11-24</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-11-25</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-11-26</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2012-01-24</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2012-01-25</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2012-01-26</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-05-11</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-07-06</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-09-07</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-10-26</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-12-08</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2012-02-16</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-05-03</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-06-27</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-08-31</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-11-02</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-12-15</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2012-02-14</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-04-12</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-06-15</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-08-17</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-10-12</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-12-01</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2012-01-31</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-04-04</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-04-05</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-04-06</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-06-06</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-06-07</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-06-08</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-08-02</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-08-03</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-08-04</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-10-06</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-10-07</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-10-08</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-11-24</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-11-25</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-11-26</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2012-01-24</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2012-01-25</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2012-01-26</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-05-11</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-07-06</th>
<td>650</td>
<td>160</td>
<td>30.0</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-09-07</th>
<td>650</td>
<td>160</td>
<td>NaN</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-10-26</th>
<td>650</td>
<td>160</td>
<td>NaN</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-12-08</th>
<td>650</td>
<td>160</td>
<td>NaN</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2012-02-16</th>
<td>650</td>
<td>160</td>
<td>NaN</td>
<td>110</td>
<td>650</td>
<td>220</td>
<td>13</td>
<td>400</td>
<td>140</td>
<td>10</td>
<td>0.6</td>
<td>14</td>
<td>250</td>
<td>10</td>
<td>0.6</td>
<td>15</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<section id="emissie-data" class="level4">
<h4 class="anchored" data-anchor-id="emissie-data">Emissie data</h4>
<hr>
<p><a href="https://github.com/fenke/openstal/blob/main/openstal/modules/barn_mass_balance.py#L398" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
</section>
<section id="find_emission_column_names" class="level3">
<h3 class="anchored" data-anchor-id="find_emission_column_names">find_emission_column_names</h3>
<blockquote class="blockquote">
<pre><code> find_emission_column_names (data:pandas.core.frame.DataFrame)</code></pre>
</blockquote>
<p><em>Find column names for NH3, CO2 and temperature from the DataFrame</em></p>
<div id="570f9c17" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(json.dumps(find_emission_column_names(vera_dataframe), indent<span class="op">=</span><span class="dv">3</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>{
   "nh3": [
      "NH3 inside [mg/m3]",
      "NH3 outside [mg/m3]",
      "NH3 Emission [kg/year per animal place]"
   ],
   "co2": [
      "CO2 inside [ppm]",
      "CO2 outside [ppm]"
   ],
   "temp": [
      "Outside temperature [oC]",
      "Inside temperature [oC]",
      "Total heat production corrected for temperature (hpu)"
   ],
   "rh": [
      "Outside RH [%]",
      "Inside RH [%]"
   ],
   "wind": []
}</code></pre>
</div>
</div>
<hr>
<p><a href="https://github.com/fenke/openstal/blob/main/openstal/modules/barn_mass_balance.py#L413" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="extract_emission_column_names" class="level3">
<h3 class="anchored" data-anchor-id="extract_emission_column_names">extract_emission_column_names</h3>
<blockquote class="blockquote">
<pre><code> extract_emission_column_names (data:pandas.core.frame.DataFrame)</code></pre>
</blockquote>
<p><em>Extract column names for NH3, CO2 and temperature from the DataFrame</em></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>data</td>
<td>DataFrame</td>
<td>DataFrame with measurement data</td>
</tr>
<tr class="even">
<td><strong>Returns</strong></td>
<td><strong>dict</strong></td>
<td></td>
</tr>
</tbody>
</table>
<div id="c85d611c" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>column_mapping <span class="op">=</span> extract_emission_column_names(vera_dataframe)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div id="877c1478" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(json.dumps(column_mapping, indent<span class="op">=</span><span class="dv">2</span>)) <span class="co">#extract_column_names(vera_dataframe)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>{
  "binnen": {
    "nh3": [
      "NH3 inside [mg/m3]"
    ],
    "co2": [
      "CO2 inside [ppm]"
    ],
    "temp": [
      "Inside temperature [oC]"
    ],
    "rh": [
      "Inside RH [%]"
    ],
    "wind": []
  },
  "buiten": {
    "nh3": [
      "NH3 outside [mg/m3]"
    ],
    "co2": [
      "CO2 outside [ppm]"
    ],
    "temp": [
      "Outside temperature [oC]"
    ],
    "rh": [
      "Outside RH [%]"
    ],
    "wind": []
  }
}</code></pre>
</div>
</div>
<div id="359e54ca" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>[col <span class="cf">for</span> loc, measures <span class="kw">in</span> column_mapping.items() <span class="cf">for</span> measure, cols <span class="kw">in</span> measures.items() <span class="cf">for</span> col <span class="kw">in</span> cols]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<pre><code>['NH3 inside [mg/m3]',
 'CO2 inside [ppm]',
 'Inside temperature [oC]',
 'Inside RH [%]',
 'NH3 outside [mg/m3]',
 'CO2 outside [ppm]',
 'Outside temperature [oC]',
 'Outside RH [%]']</code></pre>
</div>
</div>
<div id="ee9aafc6" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>flatten_column_mapping(column_mapping)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<pre><code>['NH3 inside [mg/m3]',
 'CO2 inside [ppm]',
 'Inside temperature [oC]',
 'Inside RH [%]',
 'NH3 outside [mg/m3]',
 'CO2 outside [ppm]',
 'Outside temperature [oC]',
 'Outside RH [%]']</code></pre>
</div>
</div>
<div id="4bf0b1bc" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>vera_dataframe[flatten_column_mapping(column_mapping)]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">NH3 inside [mg/m3]</th>
<th data-quarto-table-cell-role="th">CO2 inside [ppm]</th>
<th data-quarto-table-cell-role="th">Inside temperature [oC]</th>
<th data-quarto-table-cell-role="th">Inside RH [%]</th>
<th data-quarto-table-cell-role="th">NH3 outside [mg/m3]</th>
<th data-quarto-table-cell-role="th">CO2 outside [ppm]</th>
<th data-quarto-table-cell-role="th">Outside temperature [oC]</th>
<th data-quarto-table-cell-role="th">Outside RH [%]</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Date</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-04-04</th>
<td>3.970204</td>
<td>1063</td>
<td>17.9</td>
<td>72.0</td>
<td>0</td>
<td>578.0</td>
<td>13.5</td>
<td>76.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-04-05</th>
<td>3.970204</td>
<td>1062</td>
<td>17.8</td>
<td>71.0</td>
<td>0</td>
<td>576.0</td>
<td>13.5</td>
<td>76.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-04-06</th>
<td>4.039857</td>
<td>1061</td>
<td>17.8</td>
<td>71.0</td>
<td>0</td>
<td>571.0</td>
<td>13.5</td>
<td>76.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-06-06</th>
<td>3.970204</td>
<td>1060</td>
<td>17.8</td>
<td>70.0</td>
<td>0</td>
<td>569.0</td>
<td>13.5</td>
<td>76.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-06-07</th>
<td>4.039857</td>
<td>1059</td>
<td>17.8</td>
<td>71.0</td>
<td>0</td>
<td>570.0</td>
<td>13.5</td>
<td>76.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-06-08</th>
<td>3.970204</td>
<td>1056</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
<td>568.0</td>
<td>13.4</td>
<td>77.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-08-02</th>
<td>3.970204</td>
<td>1056</td>
<td>17.7</td>
<td>72.0</td>
<td>0</td>
<td>568.0</td>
<td>13.4</td>
<td>77.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-08-03</th>
<td>3.970204</td>
<td>1056</td>
<td>17.7</td>
<td>72.0</td>
<td>0</td>
<td>568.0</td>
<td>13.4</td>
<td>77.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-08-04</th>
<td>3.970204</td>
<td>1057</td>
<td>17.7</td>
<td>72.0</td>
<td>0</td>
<td>565.0</td>
<td>13.4</td>
<td>77.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-10-06</th>
<td>4.039857</td>
<td>1057</td>
<td>17.7</td>
<td>72.0</td>
<td>0</td>
<td>566.0</td>
<td>13.4</td>
<td>77.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-10-07</th>
<td>3.970204</td>
<td>1054</td>
<td>17.7</td>
<td>72.0</td>
<td>0</td>
<td>566.0</td>
<td>13.4</td>
<td>77.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-10-08</th>
<td>3.970204</td>
<td>1058</td>
<td>17.7</td>
<td>72.0</td>
<td>0</td>
<td>565.0</td>
<td>13.3</td>
<td>77.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-11-24</th>
<td>3.970204</td>
<td>1058</td>
<td>17.7</td>
<td>73.0</td>
<td>0</td>
<td>566.0</td>
<td>13.3</td>
<td>77.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-11-25</th>
<td>3.970204</td>
<td>1051</td>
<td>17.8</td>
<td>73.0</td>
<td>0</td>
<td>565.0</td>
<td>13.3</td>
<td>77.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-11-26</th>
<td>3.970204</td>
<td>1051</td>
<td>17.7</td>
<td>72.0</td>
<td>0</td>
<td>561.0</td>
<td>13.3</td>
<td>77.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2012-01-24</th>
<td>3.970204</td>
<td>1054</td>
<td>17.7</td>
<td>72.0</td>
<td>0</td>
<td>563.0</td>
<td>13.3</td>
<td>77.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2012-01-25</th>
<td>3.970204</td>
<td>1059</td>
<td>17.7</td>
<td>71.0</td>
<td>0</td>
<td>563.0</td>
<td>13.3</td>
<td>77.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2012-01-26</th>
<td>3.970204</td>
<td>1055</td>
<td>17.7</td>
<td>72.0</td>
<td>0</td>
<td>565.0</td>
<td>13.3</td>
<td>77.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-05-11</th>
<td>3.970204</td>
<td>1058</td>
<td>17.7</td>
<td>72.0</td>
<td>0</td>
<td>568.0</td>
<td>13.3</td>
<td>77.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-07-06</th>
<td>3.970204</td>
<td>1058</td>
<td>17.7</td>
<td>72.0</td>
<td>0</td>
<td>567.0</td>
<td>13.3</td>
<td>77.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-09-07</th>
<td>3.970204</td>
<td>1058</td>
<td>17.7</td>
<td>72.0</td>
<td>0</td>
<td>569.0</td>
<td>13.3</td>
<td>77.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-10-26</th>
<td>3.970204</td>
<td>1061</td>
<td>17.7</td>
<td>73.0</td>
<td>0</td>
<td>568.0</td>
<td>13.2</td>
<td>77.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-12-08</th>
<td>3.970204</td>
<td>1058</td>
<td>17.7</td>
<td>73.0</td>
<td>0</td>
<td>570.0</td>
<td>13.2</td>
<td>78.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2012-02-16</th>
<td>3.970204</td>
<td>1059</td>
<td>17.7</td>
<td>73.0</td>
<td>0</td>
<td>574.0</td>
<td>13.2</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-05-03</th>
<td>3.970204</td>
<td>1059</td>
<td>17.7</td>
<td>72.0</td>
<td>0</td>
<td>575.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-06-27</th>
<td>3.970204</td>
<td>1061</td>
<td>17.8</td>
<td>72.0</td>
<td>0</td>
<td>573.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-08-31</th>
<td>3.970204</td>
<td>1062</td>
<td>17.8</td>
<td>72.0</td>
<td>0</td>
<td>574.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-11-02</th>
<td>3.970204</td>
<td>1063</td>
<td>17.8</td>
<td>71.0</td>
<td>0</td>
<td>574.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-12-15</th>
<td>3.970204</td>
<td>1063</td>
<td>17.7</td>
<td>71.0</td>
<td>0</td>
<td>571.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2012-02-14</th>
<td>3.970204</td>
<td>1068</td>
<td>17.6</td>
<td>71.0</td>
<td>0</td>
<td>570.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-04-12</th>
<td>3.830898</td>
<td>1070</td>
<td>17.6</td>
<td>71.0</td>
<td>0</td>
<td>568.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-06-15</th>
<td>3.761246</td>
<td>1069</td>
<td>17.5</td>
<td>71.0</td>
<td>0</td>
<td>566.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-08-17</th>
<td>3.691593</td>
<td>1070</td>
<td>17.4</td>
<td>70.0</td>
<td>0</td>
<td>565.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-10-12</th>
<td>NaN</td>
<td>1069</td>
<td>17.3</td>
<td>71.0</td>
<td>0</td>
<td>563.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-12-01</th>
<td>NaN</td>
<td>1067</td>
<td>17.3</td>
<td>71.0</td>
<td>0</td>
<td>563.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2012-01-31</th>
<td>NaN</td>
<td>1062</td>
<td>17.3</td>
<td>71.0</td>
<td>0</td>
<td>561.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-04-04</th>
<td>NaN</td>
<td>1059</td>
<td>17.3</td>
<td>71.0</td>
<td>0</td>
<td>560.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-04-05</th>
<td>NaN</td>
<td>1047</td>
<td>17.2</td>
<td>72.0</td>
<td>0</td>
<td>561.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-04-06</th>
<td>NaN</td>
<td>1034</td>
<td>17.3</td>
<td>72.0</td>
<td>0</td>
<td>558.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-06-06</th>
<td>NaN</td>
<td>1027</td>
<td>17.3</td>
<td>73.0</td>
<td>0</td>
<td>555.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-06-07</th>
<td>NaN</td>
<td>1016</td>
<td>17.4</td>
<td>73.0</td>
<td>0</td>
<td>553.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-06-08</th>
<td>NaN</td>
<td>1017</td>
<td>17.5</td>
<td>73.0</td>
<td>0</td>
<td>555.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-08-02</th>
<td>NaN</td>
<td>1017</td>
<td>17.5</td>
<td>73.0</td>
<td>0</td>
<td>556.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-08-03</th>
<td>NaN</td>
<td>1018</td>
<td>17.6</td>
<td>73.0</td>
<td>0</td>
<td>555.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-08-04</th>
<td>NaN</td>
<td>1019</td>
<td>17.6</td>
<td>73.0</td>
<td>0</td>
<td>554.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-10-06</th>
<td>NaN</td>
<td>1026</td>
<td>17.7</td>
<td>NaN</td>
<td>0</td>
<td>551.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-10-07</th>
<td>NaN</td>
<td>1027</td>
<td>17.7</td>
<td>NaN</td>
<td>0</td>
<td>554.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-10-08</th>
<td>NaN</td>
<td>1028</td>
<td>17.7</td>
<td>NaN</td>
<td>0</td>
<td>553.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-11-24</th>
<td>NaN</td>
<td>1030</td>
<td>17.8</td>
<td>NaN</td>
<td>0</td>
<td>554.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-11-25</th>
<td>NaN</td>
<td>1031</td>
<td>17.8</td>
<td>NaN</td>
<td>0</td>
<td>558.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-11-26</th>
<td>NaN</td>
<td>1035</td>
<td>17.8</td>
<td>NaN</td>
<td>0</td>
<td>559.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2012-01-24</th>
<td>NaN</td>
<td>1045</td>
<td>17.8</td>
<td>NaN</td>
<td>0</td>
<td>557.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2012-01-25</th>
<td>NaN</td>
<td>1048</td>
<td>17.7</td>
<td>NaN</td>
<td>0</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2012-01-26</th>
<td>NaN</td>
<td>1060</td>
<td>17.7</td>
<td>NaN</td>
<td>0</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-05-11</th>
<td>NaN</td>
<td>1066</td>
<td>17.7</td>
<td>NaN</td>
<td>0</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-07-06</th>
<td>NaN</td>
<td>1076</td>
<td>17.7</td>
<td>NaN</td>
<td>0</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-09-07</th>
<td>NaN</td>
<td>1073</td>
<td>17.7</td>
<td>NaN</td>
<td>0</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-10-26</th>
<td>NaN</td>
<td>1079</td>
<td>17.8</td>
<td>NaN</td>
<td>0</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-12-08</th>
<td>NaN</td>
<td>1077</td>
<td>17.7</td>
<td>NaN</td>
<td>0</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2012-02-16</th>
<td>NaN</td>
<td>1079</td>
<td>17.7</td>
<td>NaN</td>
<td>0</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="opschonen-van-data" class="level3">
<h3 class="anchored" data-anchor-id="opschonen-van-data">Opschonen van data</h3>
<p>Een randvoorwaarde van de ratiomethode is dat de concentraties van NH<sub>3</sub> en het tracergas - in dit geval CO<sub>2</sub> - op dezelfde meetpunten en met dezelfde meetfrequentie gemeten moeten worden. Om een goede schatting van de emissie te verkrijgen is het van belang dat <em>de concentratieratio’s per meetpunt worden geschat en daarna een gemiddeld van deze waarden wordt genomen</em>, in plaats dan eerst een gemiddelde concentratie van al die punten te bepalen en daarna de ratiomethode te gebruiken.</p>
<p>We verwachten dat de metingen van veschillende sensoren komen en op verschillende tijdstippen zijn gedaan. Om te kunnen rekenen moeten rijen volledig gevult zijn. We kunnen dit doen door de data te resamplen op een vast tijdsinterval (bijv. 10 minuten).</p>
<hr>
<p><a href="https://github.com/fenke/openstal/blob/main/openstal/modules/barn_mass_balance.py#L437" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="resample_data" class="level3">
<h3 class="anchored" data-anchor-id="resample_data">resample_data</h3>
<blockquote class="blockquote">
<pre><code> resample_data (data:pandas.core.frame.DataFrame, interval:str,
                method:str)</code></pre>
</blockquote>
<p><em>Resample data to a specified interval and interpolate missing values with the givien method</em></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>data</td>
<td>DataFrame</td>
<td>DataFrame with measurement data</td>
</tr>
<tr class="even">
<td>interval</td>
<td>str</td>
<td>resampling interval (e.g.&nbsp;‘10min’ for 10 minutes )</td>
</tr>
<tr class="odd">
<td>method</td>
<td>str</td>
<td>resampling method (e.g.&nbsp;‘linear’, ‘cubic’ )</td>
</tr>
<tr class="even">
<td><strong>Returns</strong></td>
<td><strong>DataFrame</strong></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="co2-productie-1" class="level3">
<h3 class="anchored" data-anchor-id="co2-productie-1">CO<sub>2</sub> productie</h3>
<div id="64e63ca6" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb54"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>extract_production_column_names(vera_dataframe)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<pre><code>{'melkvee': {'gewicht': ['Weight milking cows [kg]'],
  'drachtdagen': ['Days in pregnancy (milking cows)'],
  'melkproductie': ['Milk production [kg/animal/day]'],
  'aantal': ['Milking cows']},
 'droogstaande koeien': {'gewicht': ['Weight dry cows [kg]'],
  'drachtdagen': ['Days in pregnancy (dry cows)'],
  'aantal': ['Dry cows']},
 'drachtig jongvee': {'gewicht': ['Weight heifers (pregnant) [kg]'],
  'drachtdagen': ['Days in pregnancy (heifers)'],
  'energievoeding': ['Energy value of feed (heifers; MJ/kg dry matter)'],
  'gewichtstoename': ['Weight gain heifers [kg/day]'],
  'aantal': ['Heifers (pregnant)']},
 'niet drachtig jongvee': {'gewicht': ['Weight heifers (not pregnant) [kg]'],
  'energievoeding': ['Energy value of feed (heifers; MJ/kg dry matter)'],
  'gewichtstoename': ['Weight gain heifers [kg/day]'],
  'aantal': ['Heifers (not pregnant)']}}</code></pre>
</div>
</div>
<div id="99a0d44d" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb56"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> category, params <span class="kw">in</span> pco2_category_functions_parameters.items():</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Category: </span><span class="sc">{</span>category<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> param, param_info <span class="kw">in</span> params.items():</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"  Parameter: </span><span class="sc">{</span>param<span class="sc">}</span><span class="ss">, Type: </span><span class="sc">{</span>param_info<span class="sc">.</span>annotation<span class="sc">}</span><span class="ss">, Default: </span><span class="sc">{</span>param_info<span class="sc">.</span>default<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Category: melkvee
  Parameter: aantal, Type: &lt;class 'inspect._empty'&gt;, Default: &lt;class 'inspect._empty'&gt;
  Parameter: melkproductie, Type: &lt;class 'inspect._empty'&gt;, Default: &lt;class 'inspect._empty'&gt;
  Parameter: drachtdagen, Type: &lt;class 'inspect._empty'&gt;, Default: &lt;class 'inspect._empty'&gt;
  Parameter: gewicht, Type: &lt;class 'inspect._empty'&gt;, Default: &lt;class 'inspect._empty'&gt;
Category: droogstaande koeien
  Parameter: aantal, Type: &lt;class 'inspect._empty'&gt;, Default: &lt;class 'inspect._empty'&gt;
  Parameter: melkproductie, Type: &lt;class 'inspect._empty'&gt;, Default: &lt;class 'inspect._empty'&gt;
  Parameter: drachtdagen, Type: &lt;class 'inspect._empty'&gt;, Default: &lt;class 'inspect._empty'&gt;
  Parameter: gewicht, Type: &lt;class 'inspect._empty'&gt;, Default: &lt;class 'inspect._empty'&gt;
Category: drachtig jongvee
  Parameter: aantal, Type: &lt;class 'inspect._empty'&gt;, Default: &lt;class 'inspect._empty'&gt;
  Parameter: energievoeding, Type: &lt;class 'inspect._empty'&gt;, Default: &lt;class 'inspect._empty'&gt;
  Parameter: drachtdagen, Type: &lt;class 'inspect._empty'&gt;, Default: &lt;class 'inspect._empty'&gt;
  Parameter: gewicht, Type: &lt;class 'inspect._empty'&gt;, Default: &lt;class 'inspect._empty'&gt;
  Parameter: gewichtstoename, Type: &lt;class 'inspect._empty'&gt;, Default: &lt;class 'inspect._empty'&gt;
Category: niet drachtig jongvee
  Parameter: aantal, Type: &lt;class 'inspect._empty'&gt;, Default: &lt;class 'inspect._empty'&gt;
  Parameter: energievoeding, Type: &lt;class 'inspect._empty'&gt;, Default: &lt;class 'inspect._empty'&gt;
  Parameter: drachtdagen, Type: &lt;class 'inspect._empty'&gt;, Default: &lt;class 'inspect._empty'&gt;
  Parameter: gewicht, Type: &lt;class 'inspect._empty'&gt;, Default: &lt;class 'inspect._empty'&gt;
  Parameter: gewichtstoename, Type: &lt;class 'inspect._empty'&gt;, Default: &lt;class 'inspect._empty'&gt;</code></pre>
</div>
</div>
<div id="1e9d4730" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb58"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>default_pco2_parameters</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<pre><code>{'melkvee': {'gewicht': 650, 'drachtdagen': 160},
 'droogstaande koeien': {'gewicht': 650,
  'drachtdagen': 220,
  'melkproductie': 0},
 'drachtig jongvee': {'gewicht': 400,
  'drachtdagen': 140,
  'energievoeding': 10.0,
  'gewichtstoename': 0.6},
 'niet drachtig jongvee': {'gewicht': 250,
  'drachtdagen': 0,
  'energievoeding': 10.0,
  'gewichtstoename': 0.6}}</code></pre>
</div>
</div>
<hr>
<p><a href="https://github.com/fenke/openstal/blob/main/openstal/modules/barn_mass_balance.py#L448" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="calculate_pco2_production_from_data" class="level3">
<h3 class="anchored" data-anchor-id="calculate_pco2_production_from_data">calculate_pco2_production_from_data</h3>
<blockquote class="blockquote">
<pre><code> calculate_pco2_production_from_data (data:pandas.core.frame.DataFrame,
                                      pco2_parameters={'melkvee':
                                      {'gewicht': 650, 'drachtdagen':
                                      160}, 'droogstaande koeien':
                                      {'gewicht': 650, 'drachtdagen': 220,
                                      'melkproductie': 0}, 'drachtig
                                      jongvee': {'gewicht': 400,
                                      'drachtdagen': 140,
                                      'energievoeding': 10.0,
                                      'gewichtstoename': 0.6}, 'niet
                                      drachtig jongvee': {'gewicht': 250,
                                      'drachtdagen': 0, 'energievoeding':
                                      10.0, 'gewichtstoename': 0.6}})</code></pre>
</blockquote>
<div id="ecc3adeb" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb61"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>calculate_pco2_production_from_data(vera_dataframe)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">PCO2_melkvee</th>
<th data-quarto-table-cell-role="th">PCO2_droogstaande koeien</th>
<th data-quarto-table-cell-role="th">PCO2_drachtig jongvee</th>
<th data-quarto-table-cell-role="th">PCO2_niet drachtig jongvee</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Date</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-04-04</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-04-05</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-04-06</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-06-06</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-06-07</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-06-08</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-08-02</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-08-03</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-08-04</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-10-06</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-10-07</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-10-08</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-11-24</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-11-25</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-11-26</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2012-01-24</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2012-01-25</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2012-01-26</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-05-11</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-07-06</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-09-07</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-10-26</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-12-08</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2012-02-16</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-05-03</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-06-27</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-08-31</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-11-02</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-12-15</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2012-02-14</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-04-12</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-06-15</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-08-17</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-10-12</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-12-01</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2012-01-31</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-04-04</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-04-05</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-04-06</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-06-06</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-06-07</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-06-08</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-08-02</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-08-03</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-08-04</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-10-06</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-10-07</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-10-08</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-11-24</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-11-25</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-11-26</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2012-01-24</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2012-01-25</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2012-01-26</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-05-11</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-07-06</th>
<td>31.82152</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-09-07</th>
<td>NaN</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-10-26</th>
<td>NaN</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-12-08</th>
<td>NaN</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2012-02-16</th>
<td>NaN</td>
<td>2.317288</td>
<td>1.891889</td>
<td>1.380852</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="d8dcff81" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb62"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>vera_dataframe.info()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
DatetimeIndex: 60 entries, 2011-04-04 to 2012-02-16
Data columns (total 55 columns):
 #   Column                                                 Non-Null Count  Dtype  
---  ------                                                 --------------  -----  
 0   Measurement institute                                  60 non-null     object 
 1   Animal Category                                        60 non-null     object 
 2   Housing system                                         60 non-null     object 
 3   Measurement location                                   60 non-null     object 
 4   Measurement period                                     60 non-null     int64  
 5   Measurement day (in period)                            60 non-null     int64  
 6   Day in year                                            60 non-null     int64  
 7   Outside temperature [oC]                               24 non-null     float64
 8   Outside RH [%]                                         23 non-null     float64
 9   Inside temperature [oC]                                59 non-null     float64
 10  Inside RH [%]                                          44 non-null     float64
 11  Animal places                                          60 non-null     int64  
 12  Milking cows                                           60 non-null     int64  
 13  Dry cows                                               60 non-null     int64  
 14  Heifers (pregnant)                                     60 non-null     int64  
 15  Heifers (not pregnant)                                 60 non-null     int64  
 16  Floor type (0: slatted floor; 1: closed floor)         60 non-null     int64  
 17  Walking area per animal (m2)                           60 non-null     float64
 18  Grazing (hours per day)                                60 non-null     int64  
 19  Closed cubicles                                        60 non-null     int64  
 20  Milk production [kg/animal/day]                        56 non-null     float64
 21  Milk [% protein]                                       60 non-null     float64
 22  Milk [% fat]                                           60 non-null     float64
 23  Urea content in milk [mg/100g]                         56 non-null     float64
 24  Weight milking cows [kg]                               60 non-null     int64  
 25  Weight dry cows [kg]                                   60 non-null     int64  
 26  Weight heifers (pregnant) [kg]                         60 non-null     int64  
 27  Weight heifers (not pregnant) [kg]                     60 non-null     int64  
 28  Days in pregnancy (milking cows)                       60 non-null     int64  
 29  Days in pregnancy (dry cows)                           60 non-null     int64  
 30  Days in pregnancy (heifers)                            60 non-null     int64  
 31  Energy value of feed (heifers; MJ/kg dry matter)       60 non-null     int64  
 32  Weight gain heifers [kg/day]                           60 non-null     float64
 33  CO2 inside [ppm]                                       60 non-null     int64  
 34  CO2 outside [ppm]                                      52 non-null     float64
 35  NH3 inside [mg/m3]                                     33 non-null     float64
 36  NH3 outside [mg/m3]                                    60 non-null     int64  
 37  Number of animals                                      60 non-null     int64  
 38  Dairy cows (milking + dry)                             60 non-null     int64  
 39  % closed cubicles                                      60 non-null     float64
 40  Occupation rate (%)                                    60 non-null     float64
 41  Dairy cows (%)                                         60 non-null     float64
 42  Heifers vs. dairy cows (%)                             60 non-null     float64
 43  Dry cows vs. dairy cows (%)                            60 non-null     float64
 44  Heat production milking cows (hpu)                     56 non-null     float64
 45  Heat production dry cows (hpu)                         56 non-null     float64
 46  Heat production heifers (pregnant) (hpu)               60 non-null     float64
 47  Heat production heifers (not pregnant) (hpu)           60 non-null     float64
 48  Total heat production (hpu)                            60 non-null     float64
 49  Total heat production corrected for temperature (hpu)  59 non-null     float64
 50  Ventilation rate [m3/h]                                51 non-null     float64
 51  Ventilation rate [m3/h per animal]                     51 non-null     float64
 52  NH3 Emission [kg/year per animal place]                32 non-null     float64
 53  Summary                                                32 non-null     float64
 54  Summary.1                                              32 non-null     float64
dtypes: float64(28), int64(23), object(4)
memory usage: 26.2+ KB</code></pre>
</div>
</div>
</section>
<section id="emissie-ratio" class="level3">
<h3 class="anchored" data-anchor-id="emissie-ratio">Emissie ratio</h3>
<hr>
<p><a href="https://github.com/fenke/openstal/blob/main/openstal/modules/barn_mass_balance.py#L481" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="calculate_emission_ratio" class="level3">
<h3 class="anchored" data-anchor-id="calculate_emission_ratio">calculate_emission_ratio</h3>
<blockquote class="blockquote">
<pre><code> calculate_emission_ratio (NH3_stal, NH3_buiten, CO2_stal, CO2_buiten)</code></pre>
</blockquote>
<p><em>Calculate the emission ratio</em></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>NH3_stal</td>
<td>NH3 concentration in the barn in mg/m3</td>
</tr>
<tr class="even">
<td>NH3_buiten</td>
<td>NH3 concentration outside in mg/m3</td>
</tr>
<tr class="odd">
<td>CO2_stal</td>
<td>CO2 concentration in the barn in ppm</td>
</tr>
<tr class="even">
<td>CO2_buiten</td>
<td>CO2 concentration outside in ppm</td>
</tr>
</tbody>
</table>
<p>With ratios calculated we can calculate the NH<sub>3</sub> emission.</p>
</section>
<section id="uiteindelijke-berekenening-module" class="level3">
<h3 class="anchored" data-anchor-id="uiteindelijke-berekenening-module">Uiteindelijke berekenening module</h3>
<div id="b744dbcf" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb65"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>columnmapping <span class="op">=</span> extract_emission_column_names(vera_dataframe)</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>temperatuur <span class="op">=</span> data[columnmapping[<span class="st">'binnen'</span>][<span class="st">'temp'</span>]].mean(axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>temperatuur</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<pre><code>Date
2011-04-04    17.9
2011-04-05    17.8
2011-04-06    17.8
2011-06-06    17.8
2011-06-07    17.8
2011-06-08     NaN
2011-08-02    17.7
2011-08-03    17.7
2011-08-04    17.7
2011-10-06    17.7
2011-10-07    17.7
2011-10-08    17.7
2011-11-24    17.7
2011-11-25    17.8
2011-11-26    17.7
2012-01-24    17.7
2012-01-25    17.7
2012-01-26    17.7
2011-05-11    17.7
2011-07-06    17.7
2011-09-07    17.7
2011-10-26    17.7
2011-12-08    17.7
2012-02-16    17.7
2011-05-03    17.7
2011-06-27    17.8
2011-08-31    17.8
2011-11-02    17.8
2011-12-15    17.7
2012-02-14    17.6
2011-04-12    17.6
2011-06-15    17.5
2011-08-17    17.4
2011-10-12    17.3
2011-12-01    17.3
2012-01-31    17.3
2011-04-04    17.3
2011-04-05    17.2
2011-04-06    17.3
2011-06-06    17.3
2011-06-07    17.4
2011-06-08    17.5
2011-08-02    17.5
2011-08-03    17.6
2011-08-04    17.6
2011-10-06    17.7
2011-10-07    17.7
2011-10-08    17.7
2011-11-24    17.8
2011-11-25    17.8
2011-11-26    17.8
2012-01-24    17.8
2012-01-25    17.7
2012-01-26    17.7
2011-05-11    17.7
2011-07-06    17.7
2011-09-07    17.7
2011-10-26    17.8
2011-12-08    17.7
2012-02-16    17.7
dtype: float64</code></pre>
</div>
</div>
<div id="3e644788" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb67"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>pco2_calculated <span class="op">=</span>     calculate_pco2_production_from_data(data)</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>pco2_calculated.<span class="bu">sum</span>(axis<span class="op">=</span><span class="dv">1</span>).rename(<span class="st">'PCO2 totaal'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<pre><code>Date
2011-04-04    37.411548
2011-04-05    37.411548
2011-04-06    37.411548
2011-06-06    37.411548
2011-06-07    37.411548
2011-06-08    37.411548
2011-08-02    37.411548
2011-08-03    37.411548
2011-08-04    37.411548
2011-10-06    37.411548
2011-10-07    37.411548
2011-10-08    37.411548
2011-11-24    37.411548
2011-11-25    37.411548
2011-11-26    37.411548
2012-01-24    37.411548
2012-01-25    37.411548
2012-01-26    37.411548
2011-05-11    37.411548
2011-07-06    37.411548
2011-09-07    37.411548
2011-10-26    37.411548
2011-12-08    37.411548
2012-02-16    37.411548
2011-05-03    37.411548
2011-06-27    37.411548
2011-08-31    37.411548
2011-11-02    37.411548
2011-12-15    37.411548
2012-02-14    37.411548
2011-04-12    37.411548
2011-06-15    37.411548
2011-08-17    37.411548
2011-10-12    37.411548
2011-12-01    37.411548
2012-01-31    37.411548
2011-04-04    37.411548
2011-04-05    37.411548
2011-04-06    37.411548
2011-06-06    37.411548
2011-06-07    37.411548
2011-06-08    37.411548
2011-08-02    37.411548
2011-08-03    37.411548
2011-08-04    37.411548
2011-10-06    37.411548
2011-10-07    37.411548
2011-10-08    37.411548
2011-11-24    37.411548
2011-11-25    37.411548
2011-11-26    37.411548
2012-01-24    37.411548
2012-01-25    37.411548
2012-01-26    37.411548
2011-05-11    37.411548
2011-07-06    37.411548
2011-09-07     5.590028
2011-10-26     5.590028
2011-12-08     5.590028
2012-02-16     5.590028
Name: PCO2 totaal, dtype: float64</code></pre>
</div>
</div>
<div id="452f9bb4" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb69"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>pco2_calculated.<span class="bu">sum</span>(axis<span class="op">=</span><span class="dv">1</span>).rename(<span class="st">'PCO2 totaal'</span>) <span class="op">*</span> <span class="dv">5</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<pre><code>Date
2011-04-04    187.057740
2011-04-05    187.057740
2011-04-06    187.057740
2011-06-06    187.057740
2011-06-07    187.057740
2011-06-08    187.057740
2011-08-02    187.057740
2011-08-03    187.057740
2011-08-04    187.057740
2011-10-06    187.057740
2011-10-07    187.057740
2011-10-08    187.057740
2011-11-24    187.057740
2011-11-25    187.057740
2011-11-26    187.057740
2012-01-24    187.057740
2012-01-25    187.057740
2012-01-26    187.057740
2011-05-11    187.057740
2011-07-06    187.057740
2011-09-07    187.057740
2011-10-26    187.057740
2011-12-08    187.057740
2012-02-16    187.057740
2011-05-03    187.057740
2011-06-27    187.057740
2011-08-31    187.057740
2011-11-02    187.057740
2011-12-15    187.057740
2012-02-14    187.057740
2011-04-12    187.057740
2011-06-15    187.057740
2011-08-17    187.057740
2011-10-12    187.057740
2011-12-01    187.057740
2012-01-31    187.057740
2011-04-04    187.057740
2011-04-05    187.057740
2011-04-06    187.057740
2011-06-06    187.057740
2011-06-07    187.057740
2011-06-08    187.057740
2011-08-02    187.057740
2011-08-03    187.057740
2011-08-04    187.057740
2011-10-06    187.057740
2011-10-07    187.057740
2011-10-08    187.057740
2011-11-24    187.057740
2011-11-25    187.057740
2011-11-26    187.057740
2012-01-24    187.057740
2012-01-25    187.057740
2012-01-26    187.057740
2011-05-11    187.057740
2011-07-06    187.057740
2011-09-07     27.950142
2011-10-26     27.950142
2011-12-08     27.950142
2012-02-16     27.950142
Name: PCO2 totaal, dtype: float64</code></pre>
</div>
</div>
<div id="d8cb4806" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb71"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>pco2_corrected <span class="op">=</span> pd.concat([calculate_temperatuur_correctie(temperatuur).rename(<span class="st">'temperatuur_correctie'</span>) , pco2_calculated.<span class="bu">sum</span>(axis<span class="op">=</span><span class="dv">1</span>).rename(<span class="st">'PCO2_totaal'</span>)], axis<span class="op">=</span><span class="dv">1</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div id="5a5e1b30" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb72"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>pco2_corrected</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">temperatuur_correctie</th>
<th data-quarto-table-cell-role="th">PCO2_totaal</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Date</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-04-04</th>
<td>1.0084</td>
<td>37.411548</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-04-05</th>
<td>1.0088</td>
<td>37.411548</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-04-06</th>
<td>1.0088</td>
<td>37.411548</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-06-06</th>
<td>1.0088</td>
<td>37.411548</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-06-07</th>
<td>1.0088</td>
<td>37.411548</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-06-08</th>
<td>NaN</td>
<td>37.411548</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-08-02</th>
<td>1.0092</td>
<td>37.411548</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-08-03</th>
<td>1.0092</td>
<td>37.411548</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-08-04</th>
<td>1.0092</td>
<td>37.411548</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-10-06</th>
<td>1.0092</td>
<td>37.411548</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-10-07</th>
<td>1.0092</td>
<td>37.411548</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-10-08</th>
<td>1.0092</td>
<td>37.411548</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-11-24</th>
<td>1.0092</td>
<td>37.411548</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-11-25</th>
<td>1.0088</td>
<td>37.411548</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-11-26</th>
<td>1.0092</td>
<td>37.411548</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2012-01-24</th>
<td>1.0092</td>
<td>37.411548</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2012-01-25</th>
<td>1.0092</td>
<td>37.411548</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2012-01-26</th>
<td>1.0092</td>
<td>37.411548</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-05-11</th>
<td>1.0092</td>
<td>37.411548</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-07-06</th>
<td>1.0092</td>
<td>37.411548</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-09-07</th>
<td>1.0092</td>
<td>37.411548</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-10-26</th>
<td>1.0092</td>
<td>37.411548</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-12-08</th>
<td>1.0092</td>
<td>37.411548</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2012-02-16</th>
<td>1.0092</td>
<td>37.411548</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-05-03</th>
<td>1.0092</td>
<td>37.411548</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-06-27</th>
<td>1.0088</td>
<td>37.411548</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-08-31</th>
<td>1.0088</td>
<td>37.411548</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-11-02</th>
<td>1.0088</td>
<td>37.411548</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-12-15</th>
<td>1.0092</td>
<td>37.411548</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2012-02-14</th>
<td>1.0096</td>
<td>37.411548</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-04-12</th>
<td>1.0096</td>
<td>37.411548</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-06-15</th>
<td>1.0100</td>
<td>37.411548</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-08-17</th>
<td>1.0104</td>
<td>37.411548</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-10-12</th>
<td>1.0108</td>
<td>37.411548</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-12-01</th>
<td>1.0108</td>
<td>37.411548</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2012-01-31</th>
<td>1.0108</td>
<td>37.411548</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-04-04</th>
<td>1.0108</td>
<td>37.411548</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-04-05</th>
<td>1.0112</td>
<td>37.411548</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-04-06</th>
<td>1.0108</td>
<td>37.411548</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-06-06</th>
<td>1.0108</td>
<td>37.411548</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-06-07</th>
<td>1.0104</td>
<td>37.411548</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-06-08</th>
<td>1.0100</td>
<td>37.411548</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-08-02</th>
<td>1.0100</td>
<td>37.411548</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-08-03</th>
<td>1.0096</td>
<td>37.411548</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-08-04</th>
<td>1.0096</td>
<td>37.411548</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-10-06</th>
<td>1.0092</td>
<td>37.411548</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-10-07</th>
<td>1.0092</td>
<td>37.411548</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-10-08</th>
<td>1.0092</td>
<td>37.411548</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-11-24</th>
<td>1.0088</td>
<td>37.411548</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-11-25</th>
<td>1.0088</td>
<td>37.411548</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-11-26</th>
<td>1.0088</td>
<td>37.411548</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2012-01-24</th>
<td>1.0088</td>
<td>37.411548</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2012-01-25</th>
<td>1.0092</td>
<td>37.411548</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2012-01-26</th>
<td>1.0092</td>
<td>37.411548</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-05-11</th>
<td>1.0092</td>
<td>37.411548</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-07-06</th>
<td>1.0092</td>
<td>37.411548</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-09-07</th>
<td>1.0092</td>
<td>5.590028</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-10-26</th>
<td>1.0088</td>
<td>5.590028</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-12-08</th>
<td>1.0092</td>
<td>5.590028</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2012-02-16</th>
<td>1.0092</td>
<td>5.590028</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="b13cf104" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb73"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>pco2_corrected[<span class="st">'PCO2_corrected'</span>] <span class="op">=</span> pco2_corrected[<span class="st">'PCO2_totaal'</span>] <span class="op">*</span> pco2_corrected[<span class="st">'temperatuur_correctie'</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>Let op, bij berekening volgens Wagenngen is er een factor 0.2 in de CO<sub>2</sub> productie die door de werkboeken pas wordt toegepat bij de debiet berekening.</p>
<div id="6636c33a" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb74"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>pco2_corrected[<span class="st">'PCO2_corrected'</span>] <span class="op">*</span> <span class="dv">5</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<pre><code>Date
2011-04-04    188.629025
2011-04-05    188.703848
2011-04-06    188.703848
2011-06-06    188.703848
2011-06-07    188.703848
2011-06-08           NaN
2011-08-02    188.778671
2011-08-03    188.778671
2011-08-04    188.778671
2011-10-06    188.778671
2011-10-07    188.778671
2011-10-08    188.778671
2011-11-24    188.778671
2011-11-25    188.703848
2011-11-26    188.778671
2012-01-24    188.778671
2012-01-25    188.778671
2012-01-26    188.778671
2011-05-11    188.778671
2011-07-06    188.778671
2011-09-07    188.778671
2011-10-26    188.778671
2011-12-08    188.778671
2012-02-16    188.778671
2011-05-03    188.778671
2011-06-27    188.703848
2011-08-31    188.703848
2011-11-02    188.703848
2011-12-15    188.778671
2012-02-14    188.853494
2011-04-12    188.853494
2011-06-15    188.928317
2011-08-17    189.003141
2011-10-12    189.077964
2011-12-01    189.077964
2012-01-31    189.077964
2011-04-04    189.077964
2011-04-05    189.152787
2011-04-06    189.077964
2011-06-06    189.077964
2011-06-07    189.003141
2011-06-08    188.928317
2011-08-02    188.928317
2011-08-03    188.853494
2011-08-04    188.853494
2011-10-06    188.778671
2011-10-07    188.778671
2011-10-08    188.778671
2011-11-24    188.703848
2011-11-25    188.703848
2011-11-26    188.703848
2012-01-24    188.703848
2012-01-25    188.778671
2012-01-26    188.778671
2011-05-11    188.778671
2011-07-06    188.778671
2011-09-07     28.207283
2011-10-26     28.196103
2011-12-08     28.207283
2012-02-16     28.207283
Name: PCO2_corrected, dtype: float64</code></pre>
</div>
</div>
<div id="0303bc6b" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb76"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>nh3_binnen <span class="op">=</span> data[columnmapping[<span class="st">'binnen'</span>][<span class="st">'nh3'</span>]].mean(axis<span class="op">=</span><span class="dv">1</span>).rename(<span class="st">'nh3_binnen'</span>)</span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>nh3_buiten <span class="op">=</span> data[columnmapping[<span class="st">'buiten'</span>][<span class="st">'nh3'</span>]].<span class="bu">min</span>(axis<span class="op">=</span><span class="dv">1</span>).rename(<span class="st">'nh3_buiten'</span>)</span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>co2_binnen <span class="op">=</span> data[columnmapping[<span class="st">'binnen'</span>][<span class="st">'co2'</span>]].mean(axis<span class="op">=</span><span class="dv">1</span>).rename(<span class="st">'co2_binnen'</span>)</span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>co2_buiten <span class="op">=</span> data[columnmapping[<span class="st">'buiten'</span>][<span class="st">'co2'</span>]].<span class="bu">min</span>(axis<span class="op">=</span><span class="dv">1</span>).rename(<span class="st">'co2_buiten'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div id="426779cc" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb77"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>nh3_binnen</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<pre><code>Date
2011-04-04    3.970204
2011-04-05    3.970204
2011-04-06    4.039857
2011-06-06    3.970204
2011-06-07    4.039857
2011-06-08    3.970204
2011-08-02    3.970204
2011-08-03    3.970204
2011-08-04    3.970204
2011-10-06    4.039857
2011-10-07    3.970204
2011-10-08    3.970204
2011-11-24    3.970204
2011-11-25    3.970204
2011-11-26    3.970204
2012-01-24    3.970204
2012-01-25    3.970204
2012-01-26    3.970204
2011-05-11    3.970204
2011-07-06    3.970204
2011-09-07    3.970204
2011-10-26    3.970204
2011-12-08    3.970204
2012-02-16    3.970204
2011-05-03    3.970204
2011-06-27    3.970204
2011-08-31    3.970204
2011-11-02    3.970204
2011-12-15    3.970204
2012-02-14    3.970204
2011-04-12    3.830898
2011-06-15    3.761246
2011-08-17    3.691593
2011-10-12         NaN
2011-12-01         NaN
2012-01-31         NaN
2011-04-04         NaN
2011-04-05         NaN
2011-04-06         NaN
2011-06-06         NaN
2011-06-07         NaN
2011-06-08         NaN
2011-08-02         NaN
2011-08-03         NaN
2011-08-04         NaN
2011-10-06         NaN
2011-10-07         NaN
2011-10-08         NaN
2011-11-24         NaN
2011-11-25         NaN
2011-11-26         NaN
2012-01-24         NaN
2012-01-25         NaN
2012-01-26         NaN
2011-05-11         NaN
2011-07-06         NaN
2011-09-07         NaN
2011-10-26         NaN
2011-12-08         NaN
2012-02-16         NaN
Name: nh3_binnen, dtype: float64</code></pre>
</div>
</div>
<section id="we-volgen-even-de-werkboeken" class="level4">
<h4 class="anchored" data-anchor-id="we-volgen-even-de-werkboeken">We volgen even de werkboeken</h4>
<p>ventilatie 1</p>
</section>
</section>
</section>
<section id="bc5-total_corrected_heat-0.2-1e-6-co2_binnen---co2_buiten" class="level1">
<h1>BC5 = Total_corrected_heat * 0.2 /(1e-6 * (co2_binnen - co2_buiten))</h1>
</section>
<section id="bd5-bc5-totaal_aantal_dieren" class="level1">
<h1>BD5 = BC5 / (totaal_aantal_dieren)</h1>
</section>
<section id="be5-bc5-8-nh3_binnen---nh3_buiten-1e6-24365-totaal_plaatsen---gesloten_plaatsen" class="level1">
<h1>BE5 = BC5 8 (nh3_binnen - nh3_buiten) / 1e6 * 24*365 / (totaal_plaatsen - gesloten_plaatsen)</h1>
<section id="berekening-volgens-wageningen" class="level4">
<h4 class="anchored" data-anchor-id="berekening-volgens-wageningen">Berekening volgens Wageningen</h4>
<div id="de0ad399" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb79"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>ratio <span class="op">=</span> calculate_emission_ratio(</span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>    NH3_stal<span class="op">=</span>nh3_binnen,</span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>    NH3_buiten<span class="op">=</span>nh3_buiten,</span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>    CO2_stal<span class="op">=</span>co2_binnen,</span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a>    CO2_buiten<span class="op">=</span>co2_buiten</span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a>).rename(<span class="st">'ratio'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div id="9c55b2c0" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb80"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>emission <span class="op">=</span> pd.concat([ratio, pco2_corrected[<span class="st">'PCO2_corrected'</span>]], axis<span class="op">=</span><span class="dv">1</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div id="bbd0b32a" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb81"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>emission[<span class="st">'emission'</span>] <span class="op">=</span> (emission[<span class="st">'ratio'</span>] <span class="op">*</span> emission[<span class="st">'PCO2_corrected'</span>]) <span class="op">*</span> <span class="dv">24</span> <span class="op">*</span> <span class="dv">365</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div id="9b8ebf51" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb82"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>emission</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">ratio</th>
<th data-quarto-table-cell-role="th">PCO2_corrected</th>
<th data-quarto-table-cell-role="th">emission</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Date</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-04-04</th>
<td>0.003168</td>
<td>37.725805</td>
<td>1047.076865</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-04-05</th>
<td>0.003162</td>
<td>37.740770</td>
<td>1045.336883</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-04-06</th>
<td>0.003190</td>
<td>37.740770</td>
<td>1054.795812</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-06-06</th>
<td>0.003130</td>
<td>37.740770</td>
<td>1034.691953</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-06-07</th>
<td>0.003197</td>
<td>37.740770</td>
<td>1056.952849</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-06-08</th>
<td>0.003149</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-08-02</th>
<td>0.003149</td>
<td>37.755734</td>
<td>1041.465523</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-08-03</th>
<td>0.003149</td>
<td>37.755734</td>
<td>1041.465523</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-08-04</th>
<td>0.003123</td>
<td>37.755734</td>
<td>1032.998362</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-10-06</th>
<td>0.003184</td>
<td>37.755734</td>
<td>1053.064947</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-10-07</th>
<td>0.003149</td>
<td>37.755734</td>
<td>1041.465523</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-10-08</th>
<td>0.003117</td>
<td>37.755734</td>
<td>1030.903040</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-11-24</th>
<td>0.003123</td>
<td>37.755734</td>
<td>1032.998362</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-11-25</th>
<td>0.003162</td>
<td>37.740770</td>
<td>1045.336883</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-11-26</th>
<td>0.003136</td>
<td>37.755734</td>
<td>1037.214663</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2012-01-24</th>
<td>0.003130</td>
<td>37.755734</td>
<td>1035.102219</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2012-01-25</th>
<td>0.003098</td>
<td>37.755734</td>
<td>1024.667768</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2012-01-26</th>
<td>0.003136</td>
<td>37.755734</td>
<td>1037.214663</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-05-11</th>
<td>0.003136</td>
<td>37.755734</td>
<td>1037.214663</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-07-06</th>
<td>0.003130</td>
<td>37.755734</td>
<td>1035.102219</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-09-07</th>
<td>0.003142</td>
<td>37.755734</td>
<td>1039.335747</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-10-26</th>
<td>0.003117</td>
<td>37.755734</td>
<td>1030.903040</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-12-08</th>
<td>0.003149</td>
<td>37.755734</td>
<td>1041.465523</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2012-02-16</th>
<td>0.003168</td>
<td>37.755734</td>
<td>1047.907549</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-05-03</th>
<td>0.003175</td>
<td>37.755734</td>
<td>1050.072637</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-06-27</th>
<td>0.003149</td>
<td>37.740770</td>
<td>1041.052735</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-08-31</th>
<td>0.003149</td>
<td>37.740770</td>
<td>1041.052735</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-11-02</th>
<td>0.003142</td>
<td>37.740770</td>
<td>1038.923802</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-12-15</th>
<td>0.003123</td>
<td>37.755734</td>
<td>1032.998362</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2012-02-14</th>
<td>0.003086</td>
<td>37.770699</td>
<td>1020.957154</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-04-12</th>
<td>0.002953</td>
<td>37.770699</td>
<td>976.936479</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-06-15</th>
<td>0.002894</td>
<td>37.785663</td>
<td>957.832483</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-08-17</th>
<td>0.002828</td>
<td>37.800628</td>
<td>936.567163</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-10-12</th>
<td>NaN</td>
<td>37.815593</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-12-01</th>
<td>NaN</td>
<td>37.815593</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2012-01-31</th>
<td>NaN</td>
<td>37.815593</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-04-04</th>
<td>NaN</td>
<td>37.815593</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-04-05</th>
<td>NaN</td>
<td>37.830557</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-04-06</th>
<td>NaN</td>
<td>37.815593</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-06-06</th>
<td>NaN</td>
<td>37.815593</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-06-07</th>
<td>NaN</td>
<td>37.800628</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-06-08</th>
<td>NaN</td>
<td>37.785663</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-08-02</th>
<td>NaN</td>
<td>37.785663</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-08-03</th>
<td>NaN</td>
<td>37.770699</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-08-04</th>
<td>NaN</td>
<td>37.770699</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-10-06</th>
<td>NaN</td>
<td>37.755734</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-10-07</th>
<td>NaN</td>
<td>37.755734</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-10-08</th>
<td>NaN</td>
<td>37.755734</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-11-24</th>
<td>NaN</td>
<td>37.740770</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-11-25</th>
<td>NaN</td>
<td>37.740770</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-11-26</th>
<td>NaN</td>
<td>37.740770</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2012-01-24</th>
<td>NaN</td>
<td>37.740770</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2012-01-25</th>
<td>NaN</td>
<td>37.755734</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2012-01-26</th>
<td>NaN</td>
<td>37.755734</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-05-11</th>
<td>NaN</td>
<td>37.755734</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-07-06</th>
<td>NaN</td>
<td>37.755734</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-09-07</th>
<td>NaN</td>
<td>5.641457</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2011-10-26</th>
<td>NaN</td>
<td>5.639221</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2011-12-08</th>
<td>NaN</td>
<td>5.641457</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2012-02-16</th>
<td>NaN</td>
<td>5.641457</td>
<td>NaN</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<hr>
<p><a href="https://github.com/fenke/openstal/blob/main/openstal/modules/barn_mass_balance.py#L500" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="calculate_emission" class="level3">
<h3 class="anchored" data-anchor-id="calculate_emission">calculate_emission</h3>
<blockquote class="blockquote">
<pre><code> calculate_emission (data:pandas.core.frame.DataFrame,
                     pco2_parameters:dict, bezetting:dict,
                     interpolate:dict={'interval': '7min', 'method':
                     'linear'})</code></pre>
</blockquote>
<p><em>Calculate the emission using the ratio method</em></p>
<table class="caption-top table">
<colgroup>
<col style="width: 6%">
<col style="width: 25%">
<col style="width: 34%">
<col style="width: 34%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>data</td>
<td>DataFrame</td>
<td></td>
<td>DataFrame with measurement data</td>
</tr>
<tr class="even">
<td>pco2_parameters</td>
<td>dict</td>
<td></td>
<td>parameters for the PCO2 calculation</td>
</tr>
<tr class="odd">
<td>bezetting</td>
<td>dict</td>
<td></td>
<td>dictionary with the animal categories and their counts</td>
</tr>
<tr class="even">
<td>interpolate</td>
<td>dict</td>
<td>{‘interval’: ‘7min’, ‘method’: ‘linear’}</td>
<td>resampling interval and method</td>
</tr>
</tbody>
</table>
<div id="cf417218" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb84"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>calculate_emission(vera_dataframe, pco2_parameters<span class="op">=</span>default_pco2_parameters, bezetting<span class="op">=</span>{}, interpolate<span class="op">=</span><span class="bu">dict</span>() ).info()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
DatetimeIndex: 60 entries, 2011-04-04 to 2012-02-16
Data columns (total 60 columns):
 #   Column                                                 Non-Null Count  Dtype  
---  ------                                                 --------------  -----  
 0   ratio                                                  33 non-null     float64
 1   temperatuur_correctie                                  59 non-null     float64
 2   PCO2_totaal                                            60 non-null     float64
 3   PCO2_corrected                                         59 non-null     float64
 4   emission                                               32 non-null     float64
 5   Measurement institute                                  60 non-null     object 
 6   Animal Category                                        60 non-null     object 
 7   Housing system                                         60 non-null     object 
 8   Measurement location                                   60 non-null     object 
 9   Measurement period                                     60 non-null     int64  
 10  Measurement day (in period)                            60 non-null     int64  
 11  Day in year                                            60 non-null     int64  
 12  Outside temperature [oC]                               24 non-null     float64
 13  Outside RH [%]                                         23 non-null     float64
 14  Inside temperature [oC]                                59 non-null     float64
 15  Inside RH [%]                                          44 non-null     float64
 16  Animal places                                          60 non-null     int64  
 17  Milking cows                                           60 non-null     int64  
 18  Dry cows                                               60 non-null     int64  
 19  Heifers (pregnant)                                     60 non-null     int64  
 20  Heifers (not pregnant)                                 60 non-null     int64  
 21  Floor type (0: slatted floor; 1: closed floor)         60 non-null     int64  
 22  Walking area per animal (m2)                           60 non-null     float64
 23  Grazing (hours per day)                                60 non-null     int64  
 24  Closed cubicles                                        60 non-null     int64  
 25  Milk production [kg/animal/day]                        56 non-null     float64
 26  Milk [% protein]                                       60 non-null     float64
 27  Milk [% fat]                                           60 non-null     float64
 28  Urea content in milk [mg/100g]                         56 non-null     float64
 29  Weight milking cows [kg]                               60 non-null     int64  
 30  Weight dry cows [kg]                                   60 non-null     int64  
 31  Weight heifers (pregnant) [kg]                         60 non-null     int64  
 32  Weight heifers (not pregnant) [kg]                     60 non-null     int64  
 33  Days in pregnancy (milking cows)                       60 non-null     int64  
 34  Days in pregnancy (dry cows)                           60 non-null     int64  
 35  Days in pregnancy (heifers)                            60 non-null     int64  
 36  Energy value of feed (heifers; MJ/kg dry matter)       60 non-null     int64  
 37  Weight gain heifers [kg/day]                           60 non-null     float64
 38  CO2 inside [ppm]                                       60 non-null     int64  
 39  CO2 outside [ppm]                                      52 non-null     float64
 40  NH3 inside [mg/m3]                                     33 non-null     float64
 41  NH3 outside [mg/m3]                                    60 non-null     int64  
 42  Number of animals                                      60 non-null     int64  
 43  Dairy cows (milking + dry)                             60 non-null     int64  
 44  % closed cubicles                                      60 non-null     float64
 45  Occupation rate (%)                                    60 non-null     float64
 46  Dairy cows (%)                                         60 non-null     float64
 47  Heifers vs. dairy cows (%)                             60 non-null     float64
 48  Dry cows vs. dairy cows (%)                            60 non-null     float64
 49  Heat production milking cows (hpu)                     56 non-null     float64
 50  Heat production dry cows (hpu)                         56 non-null     float64
 51  Heat production heifers (pregnant) (hpu)               60 non-null     float64
 52  Heat production heifers (not pregnant) (hpu)           60 non-null     float64
 53  Total heat production (hpu)                            60 non-null     float64
 54  Total heat production corrected for temperature (hpu)  59 non-null     float64
 55  Ventilation rate [m3/h]                                51 non-null     float64
 56  Ventilation rate [m3/h per animal]                     51 non-null     float64
 57  NH3 Emission [kg/year per animal place]                32 non-null     float64
 58  Summary                                                32 non-null     float64
 59  Summary.1                                              32 non-null     float64
dtypes: float64(33), int64(23), object(4)
memory usage: 28.6+ KB</code></pre>
</div>
</div>
<div id="38f590a3" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb86"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>extract_emission_column_names(data)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<pre><code>{'binnen': {'nh3': ['NH3 inside [mg/m3]'],
  'co2': ['CO2 inside [ppm]'],
  'temp': ['Inside temperature [oC]'],
  'rh': ['Inside RH [%]'],
  'wind': []},
 'buiten': {'nh3': ['NH3 outside [mg/m3]'],
  'co2': ['CO2 outside [ppm]'],
  'temp': ['Outside temperature [oC]'],
  'rh': ['Outside RH [%]'],
  'wind': []}}</code></pre>
</div>
</div>
</section>
<section id="airflow-from-co2" class="level3">
<h3 class="anchored" data-anchor-id="airflow-from-co2">Airflow from CO2</h3>
<div id="192c474c" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb88"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> calculate_airflow_from_co2(</span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>        PCO2,          <span class="co"># CO2 production in kg per uur</span></span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>        CO2_stal,     <span class="co"># CO2 concentration in the barn in ppm</span></span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>        CO2_buiten,   <span class="co"># CO2 concentration outside in ppm</span></span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a>    ):</span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">'''Calculate the airflow from CO2 concentrations and production'''</span></span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb88-8"><a href="#cb88-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> PCO2 <span class="op">*</span> <span class="fl">1e-6</span> <span class="op">*</span>  CO2_buiten <span class="op">/</span> CO2_stal  <span class="co"># m3 per uur</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section>
<section id="analyse-worksheet-berekeningen" class="level2">
<h2 class="anchored" data-anchor-id="analyse-worksheet-berekeningen">Analyse worksheet berekeningen</h2>
<section id="nh3-emissie-berekend-kgdpljaar" class="level3">
<h3 class="anchored" data-anchor-id="nh3-emissie-berekend-kgdpljaar">NH3 Emissie berekend [kg/dpl/jaar]</h3>
<pre><code>IF(
    ISNUMBER(BE4),
    BE4*(AO4-AP4)/1000000*24*365/(Q4-Y4),
    ""
)
</code></pre>
<p><span class="math display">\[
BG_i = BE_i \times \frac{ (AO_i - AP_i)}{Q_i - Y_i} \times \frac{  24 \times 365}{1000000}
\]</span></p>
<ul>
<li><p><span class="math inline">\(BE_i\)</span> is <em>Debiet berekend [m3/uur]</em></p></li>
<li><p><span class="math inline">\(AO_i\)</span> is <em>NH3 concentratie stal [mg/m3]</em></p></li>
<li><p><span class="math inline">\(AP_i\)</span> is <em>NH3 concentratie buiten [mg/m3]</em></p></li>
<li><p><span class="math inline">\(Y_i\)</span> is <em>Afgedekte ligboxen</em></p></li>
<li><p><span class="math inline">\(Q_i\)</span> is <em>Dierplaatsen</em></p></li>
</ul>
</section>
<section id="debiet-berekend-m3uur" class="level3">
<h3 class="anchored" data-anchor-id="debiet-berekend-m3uur">Debiet berekend [m3/uur]</h3>
<pre><code>IF(
    OR(
        BD4="",AM4="*",AM4=""
    ),
    IF(
        ISNUMBER(AQ4),
        AQ4,
        ""
    ),
    BD4*0.2/(0.000001*(AM4-AN4)))</code></pre>
<p><span class="math display">\[
BE_i = BD_i \times \frac{0.2}{0.000001 \times (AM_i - AN_i)}
\]</span></p>
<ul>
<li><p><span class="math inline">\(BD_i\)</span> is <em>Warmteproductie (totaal, gecorrigeerd door temperatuur)</em></p></li>
<li><p><span class="math inline">\(AM_i\)</span> is <em>CO2 stal [ppm]</em></p></li>
<li><p><span class="math inline">\(AN_i\)</span> is <em>CO2 buiten [ppm]</em></p></li>
<li><p><span class="math inline">\(AQ_i\)</span> is <em>Debiet gemeten [m3/uur]</em></p></li>
</ul>
<p>From these two equations we can derive:</p>
<p><span class="math display">\[
BG_i = BD_i \times \frac{0.2}{0.000001 \times (AM_i - AN_i)} \times \frac{ (AO_i - AP_i)}{Q_i - Y_i} \times \frac{  24 \times 365}{1000000}  \Leftrightarrow
\]</span></p>
<p><span class="math display">\[
BG_i = BD_i \times \frac{0.2}{ (AM_i - AN_i)} \times \frac{ (AO_i - AP_i)}{Q_i - Y_i} \times   24 \times 365 \Leftrightarrow
\]</span></p>
<p><span class="math display">\[
BG_i =  0.2 \times BD_i \times  \frac{(AO_i - AP_i)}{ (AM_i - AN_i)} \times \frac{ 24 \times 365}{Q_i - Y_i}   
\]</span></p>
<p><span class="math display">\[
E_i = PCO_{2i} \cdot \frac{(NH_{3})_{i}^{stal} - (NH_{3})_{i}^{buiten} }{(CO_{2})_{i}^{stal} - CO_{2i}^{buiten} }
\]</span></p>
</section>
<section id="warmteproductie-totaal-gecorrigeerd-door-temperatuur" class="level3">
<h3 class="anchored" data-anchor-id="warmteproductie-totaal-gecorrigeerd-door-temperatuur">Warmteproductie (totaal, gecorrigeerd door temperatuur)</h3>
<pre><code>IF(
    BC4="",
    "",
    IF(
        M4="*",
        BC4,
        BC4*(1000+4*(20-M4))/1000
    )
)</code></pre>
<p><span class="math display">\[
BD_i = BC_i \times \frac{1000 + 4 \times (20 - M_i)}{1000}
\]</span></p>
<ul>
<li><p><span class="math inline">\(BC_i\)</span> is <em>Warmteproductie (totaal)</em></p></li>
<li><p><span class="math inline">\(M_i\)</span> is <em>Temperatuur [°C]</em></p></li>
</ul>
</section>
<section id="warmteproductie-totaal-w" class="level3">
<h3 class="anchored" data-anchor-id="warmteproductie-totaal-w">Warmteproductie totaal [W]</h3>
<pre><code>=IF(SUM(AY4:BB4)=0,"",SUM(AY4:BB4))</code></pre>
<p><span class="math display">\[
BC_i = \sum_{j=AY}^{BB} P_j
\]</span> * <span class="math inline">\(BC_i\)</span> is <em>Warmteproductie (totaal)</em></p>
<ul>
<li><span class="math inline">\(P_j\)</span> is <em>Warmteproductie categorie (melkvee, droogstaande koeien, drachtig jongvee, niet drachtig jongvee)</em></li>
</ul>
</section>
</section>
<section id="warmteproductie" class="level2">
<h2 class="anchored" data-anchor-id="warmteproductie">Warmteproductie</h2>
<section id="warmteproductie-categorie-melkvee" class="level3">
<h3 class="anchored" data-anchor-id="warmteproductie-categorie-melkvee">Warmteproductie categorie melkvee</h3>
<pre><code>=IF(
    OR(R4="",Z4=""),
    "",
    (5.6*(IF(AD4="",'Input voor PCO2'!$C$5,AD4))^0.75+22*Z4+1.6*0.00001*(IF(AH4="",'Input voor PCO2'!$D$5,AH4))^3)*R4/1000
)</code></pre>
<p><span class="math display">\[
P_{melkvee} = \frac{5.6 (AD_i)^{0.75} + 22 Z_i + 1.6 \times 10^{-5} (AH_i)^3}{1000} \times R_i
\]</span></p>
<p>Where:</p>
<ul>
<li><p><span class="math inline">\(AD_i\)</span> is <em>Gewicht melkvee [kg]</em></p></li>
<li><p><span class="math inline">\(AH_i\)</span> is <em>Drachtdagen melkvee [dagen]</em></p></li>
<li><p><span class="math inline">\(Z_i\)</span> is <em>Melkproductie melkvee [kg/dag]</em></p></li>
<li><p><span class="math inline">\(R_i\)</span> is <em>Aantal melkvee</em></p></li>
</ul>
</section>
</section>
<section id="calculatie-vergelijking-met-voorbeeld-data" class="level2">
<h2 class="anchored" data-anchor-id="calculatie-vergelijking-met-voorbeeld-data">Calculatie vergelijking met voorbeeld data</h2>
<section id="standaard-parameters" class="level3">
<h3 class="anchored" data-anchor-id="standaard-parameters">Standaard parameters</h3>
<div id="46f0497f" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb94"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>test_parameters <span class="op">=</span>{</span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">'melkvee'</span>: {</span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a>        <span class="st">'drachtdagen'</span>: <span class="dv">160</span>,</span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">'gewicht'</span>: <span class="dv">650</span>,</span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">'melkproductie'</span>: <span class="dv">28</span></span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb94-7"><a href="#cb94-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">'droogstaande koeien'</span>: {</span>
<span id="cb94-8"><a href="#cb94-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">'drachtdagen'</span>: <span class="dv">220</span>,</span>
<span id="cb94-9"><a href="#cb94-9" aria-hidden="true" tabindex="-1"></a>        <span class="st">'gewicht'</span>: <span class="dv">650</span>,</span>
<span id="cb94-10"><a href="#cb94-10" aria-hidden="true" tabindex="-1"></a>        <span class="st">'melkproductie'</span>: <span class="dv">28</span></span>
<span id="cb94-11"><a href="#cb94-11" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb94-12"><a href="#cb94-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">'drachtig jongvee'</span>: {</span>
<span id="cb94-13"><a href="#cb94-13" aria-hidden="true" tabindex="-1"></a>        <span class="st">'drachtdagen'</span>: <span class="dv">140</span>,</span>
<span id="cb94-14"><a href="#cb94-14" aria-hidden="true" tabindex="-1"></a>        <span class="st">'gewicht'</span>: <span class="dv">400</span>,</span>
<span id="cb94-15"><a href="#cb94-15" aria-hidden="true" tabindex="-1"></a>        <span class="st">'energievoeding'</span>: <span class="fl">10.0</span>,</span>
<span id="cb94-16"><a href="#cb94-16" aria-hidden="true" tabindex="-1"></a>        <span class="st">'gewichtstoename'</span>: <span class="fl">0.6</span></span>
<span id="cb94-17"><a href="#cb94-17" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb94-18"><a href="#cb94-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">'niet drachtig jongvee'</span>: {</span>
<span id="cb94-19"><a href="#cb94-19" aria-hidden="true" tabindex="-1"></a>        <span class="st">'drachtdagen'</span>: <span class="dv">0</span>,</span>
<span id="cb94-20"><a href="#cb94-20" aria-hidden="true" tabindex="-1"></a>        <span class="st">'gewicht'</span>: <span class="dv">250</span>,</span>
<span id="cb94-21"><a href="#cb94-21" aria-hidden="true" tabindex="-1"></a>        <span class="st">'energievoeding'</span>: <span class="fl">10.0</span>,</span>
<span id="cb94-22"><a href="#cb94-22" aria-hidden="true" tabindex="-1"></a>        <span class="st">'gewichtstoename'</span>: <span class="fl">0.6</span></span>
<span id="cb94-23"><a href="#cb94-23" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb94-24"><a href="#cb94-24" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div id="c7cd3f88" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb95"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>bezetting <span class="op">=</span> {</span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">'melkvee'</span>: <span class="bu">dict</span>(aantal<span class="op">=</span><span class="dv">130</span>),</span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'droogstaande koeien'</span>: <span class="bu">dict</span>(aantal<span class="op">=</span><span class="dv">6</span>),</span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'drachtig jongvee'</span>: <span class="bu">dict</span>(aantal<span class="op">=</span><span class="dv">0</span>),</span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'niet drachtig jongvee'</span>: <span class="bu">dict</span>(aantal<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb95-6"><a href="#cb95-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section>
<section id="parameters-importeren" class="level3">
<h3 class="anchored" data-anchor-id="parameters-importeren">Parameters importeren</h3>
<div id="6455fae7" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb96"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>test_data_filename <span class="op">=</span> os.path.join(os.getcwd(), <span class="st">'..'</span>, <span class="st">'data'</span>, <span class="st">'massabalans'</span>, <span class="st">'Testdata2.xlsx'</span>)</span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(test_data_filename)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>/home/fenke/repos/openstal/nbs/../data/massabalans/Testdata2.xlsx</code></pre>
</div>
</div>
<div id="6fc68952" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb98"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>test_productiegegevens <span class="op">=</span> pd.read_excel(test_data_filename, sheet_name<span class="op">=</span><span class="st">'Bedrijfsproductiegegevens'</span>, header<span class="op">=</span><span class="dv">0</span>, index_col<span class="op">=</span><span class="dv">0</span>, parse_dates<span class="op">=</span><span class="va">True</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>/tmp/ipykernel_6823/3760343135.py:1: UserWarning: Could not infer format, so each element will be parsed individually, falling back to `dateutil`. To ensure parsing is consistent and as-expected, please specify a format.
  test_productiegegevens = pd.read_excel(test_data_filename, sheet_name='Bedrijfsproductiegegevens', header=0, index_col=0, parse_dates=True)</code></pre>
</div>
</div>
<div id="bd71a283" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb100"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>test_productiegegevens</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Waarde</th>
<th data-quarto-table-cell-role="th">Naam parameter in WLR rapport</th>
<th data-quarto-table-cell-role="th">Naam parameter in Slimme Stal</th>
<th data-quarto-table-cell-role="th">Hoe vaak deze waarde verandert</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Parameter</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">Aantal dierplaatsen (=aantal ligboxen)</th>
<td>179.000000</td>
<td>-</td>
<td>NaN</td>
<td>zelden</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Aantal melkgevende koeien</th>
<td>110.000000</td>
<td>-</td>
<td>NaN</td>
<td>elke 3-7 dagen</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Aantal droogstaande koeien</th>
<td>13.000000</td>
<td>-</td>
<td>NaN</td>
<td>elke 3-7 dagen</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Aantal drachtige pinken</th>
<td>14.000000</td>
<td>-</td>
<td>NaN</td>
<td>elke 3-7 dagen</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Aantal niet-drachtig jongvee</th>
<td>15.000000</td>
<td>-</td>
<td>NaN</td>
<td>elke 3-7 dagen</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Melkproductie (kg/koe/dag)</th>
<td>30.000000</td>
<td>Y1</td>
<td>NaN</td>
<td>elke 3 dagen</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Ureumgetal (mg/100g)</th>
<td>16.000000</td>
<td>-</td>
<td>NaN</td>
<td>elke 3 dagen</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Mest mest besmeurd oppervlakte (m2)</th>
<td>760.000000</td>
<td>-</td>
<td>NaN</td>
<td>zelden</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Aantal ligboxen gesloten</th>
<td>21.000000</td>
<td>NaN</td>
<td>NaN</td>
<td>zelden</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Gewicht melkkoe (kg)</th>
<td>650.000000</td>
<td>m</td>
<td>NaN</td>
<td>nooit</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Gewicht droogstaande koe (kg)</th>
<td>650.000000</td>
<td>m</td>
<td>NaN</td>
<td>nooit</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Gewicht drachtige pink (kg)</th>
<td>400.000000</td>
<td>m</td>
<td>NaN</td>
<td>nooit</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Gewicht niet-drachtig jongvee (kg)</th>
<td>250.000000</td>
<td>m</td>
<td>NaN</td>
<td>nooit</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Dagen in dracht melkkoe</th>
<td>160.000000</td>
<td>p</td>
<td>NaN</td>
<td>nooit</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Dagen in dracht droogstaande koe</th>
<td>220.000000</td>
<td>p</td>
<td>NaN</td>
<td>nooit</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Dagen in dracht drachtige pink</th>
<td>140.000000</td>
<td>p</td>
<td>NaN</td>
<td>nooit</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Energiewaarde voer drachtige pink (MJ/kg DS)</th>
<td>10.000000</td>
<td>M</td>
<td>NaN</td>
<td>nooit</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Energiewaarde voer niet-drachtig jongevee (MJ/kg DS)</th>
<td>10.000000</td>
<td>M</td>
<td>NaN</td>
<td>nooit</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Gewichtstoename drachtige pink (kg/dag)</th>
<td>0.600000</td>
<td>Y2</td>
<td>NaN</td>
<td>nooit</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Gewichtstoename niet-drachtig jongvee (kg/dag)</th>
<td>0.600000</td>
<td>Y2</td>
<td>NaN</td>
<td>nooit</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">NaN</th>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">NaN</th>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">PCO2 berekening</th>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">PCO2 melkvee</th>
<td>159.107598</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">PCO2 droogstaande koe</th>
<td>11.586441</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">PCO2 drachtige pink</th>
<td>9.459443</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">PCO2 niet-drachtig jongee</th>
<td>6.904258</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">NaN</th>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">PCO2 totaal</th>
<td>187.057740</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">NaN</th>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Totaal aantal vee</th>
<td>152.000000</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">NaN</th>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Aantal ligboxen open</th>
<td>158.000000</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="data-importeren" class="level3">
<h3 class="anchored" data-anchor-id="data-importeren">Data importeren</h3>
<div id="d5abf06b" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb101"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>test_dataframe <span class="op">=</span> pd.read_excel(test_data_filename, sheet_name<span class="op">=</span><span class="st">'Ruwe Data (CARS)'</span>, header<span class="op">=</span><span class="dv">1</span>, index_col<span class="op">=</span><span class="dv">0</span>, parse_dates<span class="op">=</span><span class="va">True</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div id="3048937c" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb102"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>test_dataframe</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">NH3 concentratie stal (ppm)</th>
<th data-quarto-table-cell-role="th">NH3 concentratie buiten (ppm)</th>
<th data-quarto-table-cell-role="th">CO2 concentratie stal (ppm)</th>
<th data-quarto-table-cell-role="th">CO2 concentratie buiten1 (ppm)</th>
<th data-quarto-table-cell-role="th">CO2 concentratie buiten2 (ppm)</th>
<th data-quarto-table-cell-role="th">Temperatuur stal1 ©</th>
<th data-quarto-table-cell-role="th">Temperatuur stal2 ©</th>
<th data-quarto-table-cell-role="th">Temperatuur buiten1 ©</th>
<th data-quarto-table-cell-role="th">Temperatuur buiten2 ©</th>
<th data-quarto-table-cell-role="th">Luchtvochtigheid stal1 (%)</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">PCO2 correctie</th>
<th data-quarto-table-cell-role="th">Ventilatiedebiet (m3/u)</th>
<th data-quarto-table-cell-role="th">Ventilatiedebiet (m3/dier/u)</th>
<th data-quarto-table-cell-role="th">NH3 emissie (kg/u)</th>
<th data-quarto-table-cell-role="th">NH3 emissie (kg/j)</th>
<th data-quarto-table-cell-role="th">NH3 emissie (kg/dp/j)</th>
<th data-quarto-table-cell-role="th">Ventilatiedebiet (m3/u).1</th>
<th data-quarto-table-cell-role="th">NH3 emissie (kg/u).1</th>
<th data-quarto-table-cell-role="th">NH3 emissie (kg/j).1</th>
<th data-quarto-table-cell-role="th">NH3 emissie (kg/dp/j).1</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Tijd</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">2025-07-04 00:00:00</th>
<td>5.7</td>
<td>0.0</td>
<td>1063.0</td>
<td>578.0</td>
<td>532.0</td>
<td>17.9</td>
<td>20.2</td>
<td>13.5</td>
<td>13.7</td>
<td>72.0</td>
<td>...</td>
<td>187.768559</td>
<td>77430.333781</td>
<td>509.410091</td>
<td>0.307414</td>
<td>2692.948507</td>
<td>17.043978</td>
<td>77776.0</td>
<td>0.35</td>
<td>3096.66</td>
<td>19.60</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2025-07-04 00:01:00</th>
<td>5.7</td>
<td>0.0</td>
<td>1062.0</td>
<td>576.0</td>
<td>531.0</td>
<td>17.8</td>
<td>20.2</td>
<td>13.5</td>
<td>13.7</td>
<td>71.0</td>
<td>...</td>
<td>187.805971</td>
<td>77286.407805</td>
<td>508.463209</td>
<td>0.306843</td>
<td>2687.942908</td>
<td>17.012297</td>
<td>77704.0</td>
<td>0.36</td>
<td>3114.52</td>
<td>19.71</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2025-07-04 00:02:00</th>
<td>5.8</td>
<td>0.0</td>
<td>1061.0</td>
<td>571.0</td>
<td>531.0</td>
<td>17.8</td>
<td>20.2</td>
<td>13.5</td>
<td>13.7</td>
<td>71.0</td>
<td>...</td>
<td>187.805971</td>
<td>76655.498353</td>
<td>504.312489</td>
<td>0.309677</td>
<td>2712.772456</td>
<td>17.169446</td>
<td>76969.0</td>
<td>0.36</td>
<td>3135.86</td>
<td>19.85</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2025-07-04 00:03:00</th>
<td>5.7</td>
<td>0.0</td>
<td>1060.0</td>
<td>569.0</td>
<td>527.0</td>
<td>17.8</td>
<td>20.2</td>
<td>13.5</td>
<td>13.7</td>
<td>70.0</td>
<td>...</td>
<td>187.805971</td>
<td>76499.377176</td>
<td>503.285376</td>
<td>0.303718</td>
<td>2660.570780</td>
<td>16.839056</td>
<td>76809.0</td>
<td>0.35</td>
<td>3094.28</td>
<td>19.58</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2025-07-04 00:04:00</th>
<td>5.8</td>
<td>0.0</td>
<td>1059.0</td>
<td>570.0</td>
<td>526.0</td>
<td>17.8</td>
<td>20.1</td>
<td>13.5</td>
<td>13.7</td>
<td>71.0</td>
<td>...</td>
<td>187.843383</td>
<td>76827.559310</td>
<td>505.444469</td>
<td>0.310372</td>
<td>2718.861545</td>
<td>17.207984</td>
<td>77228.0</td>
<td>0.36</td>
<td>3148.07</td>
<td>19.92</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">...</th>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2025-08-22 23:55:00</th>
<td>2.1</td>
<td>0.0</td>
<td>611.0</td>
<td>395.0</td>
<td>490.0</td>
<td>16.6</td>
<td>21.3</td>
<td>15.0</td>
<td>14.9</td>
<td>74.5</td>
<td>...</td>
<td>187.843383</td>
<td>173929.057883</td>
<td>1144.270118</td>
<td>0.254407</td>
<td>2228.607057</td>
<td>12.450319</td>
<td>183621.0</td>
<td>0.30</td>
<td>2597.60</td>
<td>15.28</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2025-08-22 23:56:00</th>
<td>2.2</td>
<td>0.0</td>
<td>607.0</td>
<td>396.0</td>
<td>489.0</td>
<td>16.6</td>
<td>21.3</td>
<td>15.0</td>
<td>14.9</td>
<td>74.5</td>
<td>...</td>
<td>187.843383</td>
<td>178050.599539</td>
<td>1171.385523</td>
<td>0.272838</td>
<td>2390.056587</td>
<td>13.352271</td>
<td>188244.0</td>
<td>0.31</td>
<td>2691.75</td>
<td>15.83</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2025-08-22 23:57:00</th>
<td>2.1</td>
<td>0.0</td>
<td>603.0</td>
<td>394.0</td>
<td>488.0</td>
<td>16.6</td>
<td>21.3</td>
<td>15.0</td>
<td>14.9</td>
<td>74.5</td>
<td>...</td>
<td>187.843383</td>
<td>179754.433028</td>
<td>1182.594954</td>
<td>0.262928</td>
<td>2303.249399</td>
<td>12.867315</td>
<td>189992.0</td>
<td>0.30</td>
<td>2604.49</td>
<td>15.32</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2025-08-22 23:58:00</th>
<td>2.1</td>
<td>0.0</td>
<td>600.0</td>
<td>395.0</td>
<td>486.0</td>
<td>16.5</td>
<td>21.3</td>
<td>15.0</td>
<td>14.9</td>
<td>75.0</td>
<td>...</td>
<td>187.880794</td>
<td>183298.335670</td>
<td>1205.910103</td>
<td>0.268112</td>
<td>2348.658524</td>
<td>13.120997</td>
<td>193900.0</td>
<td>0.31</td>
<td>2727.22</td>
<td>16.04</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2025-08-22 23:59:00</th>
<td>2.1</td>
<td>0.0</td>
<td>599.0</td>
<td>397.0</td>
<td>485.0</td>
<td>16.6</td>
<td>21.3</td>
<td>15.0</td>
<td>14.9</td>
<td>75.0</td>
<td>...</td>
<td>187.843383</td>
<td>185983.547043</td>
<td>1223.575967</td>
<td>0.272039</td>
<td>2383.064972</td>
<td>13.313212</td>
<td>196860.0</td>
<td>0.31</td>
<td>2707.79</td>
<td>15.93</td>
</tr>
</tbody>
</table>

<p>5760 rows × 33 columns</p>
</div>
</div>
</div>
<div id="abb130ff" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb103"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>test_dataframe.info()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
DatetimeIndex: 60 entries, NaT to NaT
Data columns (total 66 columns):
 #   Column                                                                                  Non-Null Count  Dtype         
---  ------                                                                                  --------------  -----         
 0   Measurement institute                                                                   60 non-null     object        
 1   Animal Category                                                                         60 non-null     object        
 2   Housing system                                                                          60 non-null     object        
 3   Measurement location                                                                    60 non-null     object        
 4   Measurement period                                                                      60 non-null     int64         
 5   Measurement day (in period)                                                             60 non-null     int64         
 6   Date                                                                                    60 non-null     datetime64[ns]
 7   Day in year                                                                             60 non-null     int64         
 8   Outside temperature [oC]                                                                24 non-null     float64       
 9   Outside RH [%]                                                                          23 non-null     float64       
 10  Inside temperature [oC]                                                                 59 non-null     float64       
 11  Inside RH [%]                                                                           44 non-null     float64       
 12  Winddirection                                                                           0 non-null      float64       
 13  Windspeed (10 m height) [m/s]                                                           0 non-null      float64       
 14  Animal places                                                                           60 non-null     int64         
 15  Milking cows                                                                            60 non-null     int64         
 16  Dry cows                                                                                60 non-null     int64         
 17  Heifers (pregnant)                                                                      60 non-null     int64         
 18  Heifers (not pregnant)                                                                  60 non-null     int64         
 19  Floor type (0: slatted floor; 1: closed floor)                                          60 non-null     int64         
 20  Walking area per animal (m2)                                                            60 non-null     float64       
 21  Grazing (hours per day)                                                                 60 non-null     int64         
 22  Closed cubicles                                                                         60 non-null     int64         
 23  Milk production [kg/animal/day]                                                         56 non-null     float64       
 24  Milk [% protein]                                                                        60 non-null     float64       
 25  Milk [% fat]                                                                            60 non-null     float64       
 26  Urea content in milk [mg/100g]                                                          56 non-null     float64       
 27  Weight milking cows [kg]                                                                60 non-null     int64         
 28  Weight dry cows [kg]                                                                    60 non-null     int64         
 29  Weight heifers (pregnant) [kg]                                                          60 non-null     int64         
 30  Weight heifers (not pregnant) [kg]                                                      60 non-null     int64         
 31  Days in pregnancy (milking cows)                                                        60 non-null     int64         
 32  Days in pregnancy (dry cows)                                                            60 non-null     int64         
 33  Days in pregnancy (heifers)                                                             60 non-null     int64         
 34  Energy value of feed (heifers; MJ/kg dry matter)                                        60 non-null     int64         
 35  Weight gain heifers [kg/day]                                                            60 non-null     float64       
 36  CO2 inside [ppm]                                                                        60 non-null     int64         
 37  CO2 outside [ppm]                                                                       52 non-null     float64       
 38  NH3 inside [mg/m3]                                                                      33 non-null     float64       
 39  NH3 outside [mg/m3]                                                                     60 non-null     int64         
 40  Number of animals                                                                       60 non-null     int64         
 41  Dairy cows (milking + dry)                                                              60 non-null     int64         
 42  % closed cubicles                                                                       60 non-null     float64       
 43  Occupation rate (%)                                                                     60 non-null     float64       
 44  Dairy cows (%)                                                                          60 non-null     float64       
 45  Heifers vs. dairy cows (%)                                                              60 non-null     float64       
 46  Dry cows vs. dairy cows (%)                                                             60 non-null     float64       
 47  Heat production milking cows (hpu)                                                      56 non-null     float64       
 48  Heat production dry cows (hpu)                                                          56 non-null     float64       
 49  Heat production heifers (pregnant) (hpu)                                                60 non-null     float64       
 50  Heat production heifers (not pregnant) (hpu)                                            60 non-null     float64       
 51  Total heat production (hpu)                                                             60 non-null     float64       
 52  Total heat production corrected for temperature (hpu)                                   59 non-null     float64       
 53  Ventilation rate [m3/h]                                                                 51 non-null     float64       
 54  Ventilation rate [m3/h per animal]                                                      51 non-null     float64       
 55  NH3 Emission [kg/year per animal place]                                                 32 non-null     float64       
 56   C1:                  cows &gt;= 70%                                                       32 non-null     float64       
 57  C2:                          Occupation rate &gt;= 90%                                     32 non-null     float64       
 58  C3:                                                             milk production &gt; 25    32 non-null     float64       
 59  Summary                                                                                 32 non-null     float64       
 60   C1:                  heifers &lt; 30%                                                     32 non-null     float64       
 61  C2:                          Occupation rate &gt;= 80%                                     32 non-null     float64       
 62  C3:                                                             milk production &gt; 25.1  32 non-null     float64       
 63  C4:                                      urea content in milk &gt; 15                      32 non-null     float64       
 64  C5:                            dry cows &lt; 25%                                           32 non-null     float64       
 65  Summary.1                                                                               32 non-null     float64       
dtypes: datetime64[ns](1), float64(38), int64(23), object(4)
memory usage: 31.4+ KB</code></pre>
</div>
</div>
<div id="fefe332d" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb105"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>fmap <span class="op">=</span> create_pco2_function_mapping_from_parameters(test_parameters)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div id="505131f7" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb106"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>columnmapping</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<pre><code>{'stal': {'nh3': ['NH3 concentratie stal (ppm)'],
  'co2': ['CO2 concentratie stal (ppm)'],
  'temp': ['Temperatuur stal ©']},
 'buiten': {'nh3': ['NH3 concentratie buiten (ppm)'],
  'co2': ['CO2 concentratie buiten1 (ppm)',
   'CO2 concentratie buiten2 (ppm)',
   'CO2 concentratie buiten3 (ppm)'],
  'temp': []}}</code></pre>
</div>
</div>
<div id="e1f429e8" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb108"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>data.info()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
DatetimeIndex: 5728 entries, 2025-08-19 00:00:00 to 2025-08-22 23:59:00
Data columns (total 7 columns):
 #   Column                          Non-Null Count  Dtype  
---  ------                          --------------  -----  
 0   NH3 concentratie stal (ppm)     5728 non-null   float64
 1   NH3 concentratie buiten (ppm)   5728 non-null   float64
 2   CO2 concentratie stal (ppm)     5728 non-null   float64
 3   CO2 concentratie buiten1 (ppm)  5728 non-null   float64
 4   CO2 concentratie buiten2 (ppm)  5728 non-null   float64
 5   CO2 concentratie buiten3 (ppm)  5728 non-null   float64
 6   Temperatuur stal ©              5728 non-null   float64
dtypes: float64(7)
memory usage: 358.0 KB</code></pre>
</div>
</div>
<div id="fa106272" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb110"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>bezetting</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<pre><code>{'melkvee': {'aantal': 130},
 'droogstaande koeien': {'aantal': 6},
 'drachtig jongvee': {'aantal': 0},
 'niet drachtig jongvee': {'aantal': 0}}</code></pre>
</div>
</div>
<div id="db8d0754" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb112"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>fmap.get(<span class="st">'melkvee'</span>)(<span class="op">**</span>bezetting[<span class="st">'melkvee'</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<pre><code>np.float64(36.46325050213528)</code></pre>
</div>
</div>
<div id="6a83d127" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb114"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>PCO2_temperatuurcorrectie(</span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a>    fmap.get(<span class="st">'niet drachtig jongvee'</span>)(<span class="op">**</span>bezetting[<span class="st">'niet drachtig jongvee'</span>]),</span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a>    temperatuur</span>
<span id="cb114-4"><a href="#cb114-4" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<pre><code>Tijd
2025-08-19 00:00:00    0.0
2025-08-19 00:01:00    0.0
2025-08-19 00:02:00    0.0
2025-08-19 00:03:00    0.0
2025-08-19 00:04:00    0.0
                      ... 
2025-08-22 23:55:00    0.0
2025-08-22 23:56:00    0.0
2025-08-22 23:57:00    0.0
2025-08-22 23:58:00    0.0
2025-08-22 23:59:00    0.0
Length: 5728, dtype: float64</code></pre>
</div>
</div>
<div id="fabcfc55" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb116"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a>PCO2_temperatuurcorrectie(</span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a>    fmap.get(<span class="st">'drachtig jongvee'</span>)(<span class="op">**</span>bezetting[<span class="st">'drachtig jongvee'</span>]),</span>
<span id="cb116-3"><a href="#cb116-3" aria-hidden="true" tabindex="-1"></a>    temperatuur</span>
<span id="cb116-4"><a href="#cb116-4" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<pre><code>Tijd
2025-08-19 00:00:00    0.0
2025-08-19 00:01:00    0.0
2025-08-19 00:02:00    0.0
2025-08-19 00:03:00    0.0
2025-08-19 00:04:00    0.0
                      ... 
2025-08-22 23:55:00    0.0
2025-08-22 23:56:00    0.0
2025-08-22 23:57:00    0.0
2025-08-22 23:58:00    0.0
2025-08-22 23:59:00    0.0
Length: 5728, dtype: float64</code></pre>
</div>
</div>
<div id="4592c678" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb118"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a>PCO2_temperatuurcorrectie(</span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a>    fmap.get(<span class="st">'droogstaande koeien'</span>)(<span class="op">**</span>bezetting[<span class="st">'droogstaande koeien'</span>]),</span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a>    temperatuur</span>
<span id="cb118-4"><a href="#cb118-4" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<pre><code>Tijd
2025-08-19 00:00:00    1.063956
2025-08-19 00:01:00    1.063528
2025-08-19 00:02:00    1.063528
2025-08-19 00:03:00    1.063956
2025-08-19 00:04:00    1.063956
                         ...   
2025-08-22 23:55:00    1.084063
2025-08-22 23:56:00    1.084063
2025-08-22 23:57:00    1.084063
2025-08-22 23:58:00    1.084491
2025-08-22 23:59:00    1.084063
Length: 5728, dtype: float64</code></pre>
</div>
</div>
<div id="c132d34b" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb120"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a>PCO2_temperatuurcorrectie(</span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a>    fmap.get(<span class="st">'melkvee'</span>)(<span class="op">**</span>bezetting[<span class="st">'melkvee'</span>]),</span>
<span id="cb120-3"><a href="#cb120-3" aria-hidden="true" tabindex="-1"></a>    temperatuur</span>
<span id="cb120-4"><a href="#cb120-4" aria-hidden="true" tabindex="-1"></a>).rename(<span class="st">'melkvee'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<pre><code>Tijd
2025-08-19 00:00:00    36.273642
2025-08-19 00:01:00    36.259056
2025-08-19 00:02:00    36.259056
2025-08-19 00:03:00    36.273642
2025-08-19 00:04:00    36.273642
                         ...    
2025-08-22 23:55:00    36.959151
2025-08-22 23:56:00    36.959151
2025-08-22 23:57:00    36.959151
2025-08-22 23:58:00    36.973736
2025-08-22 23:59:00    36.959151
Name: melkvee, Length: 5728, dtype: float64</code></pre>
</div>
</div>
<div id="406d5d83" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb122"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a>pd.concat(</span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a>        [</span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a>            PCO2_temperatuurcorrectie(</span>
<span id="cb122-4"><a href="#cb122-4" aria-hidden="true" tabindex="-1"></a>                fmap.get(category)(<span class="op">**</span>params)<span class="op">*</span><span class="dv">5</span>,</span>
<span id="cb122-5"><a href="#cb122-5" aria-hidden="true" tabindex="-1"></a>                temperatuur</span>
<span id="cb122-6"><a href="#cb122-6" aria-hidden="true" tabindex="-1"></a>            ).rename(category)</span>
<span id="cb122-7"><a href="#cb122-7" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> category, params <span class="kw">in</span> bezetting.items()</span>
<span id="cb122-8"><a href="#cb122-8" aria-hidden="true" tabindex="-1"></a>        ], axis<span class="op">=</span><span class="dv">1</span></span>
<span id="cb122-9"><a href="#cb122-9" aria-hidden="true" tabindex="-1"></a>    ).<span class="bu">sum</span>(axis<span class="op">=</span><span class="dv">1</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<pre><code>Tijd
2025-08-19 00:00:00    186.687989
2025-08-19 00:01:00    186.612923
2025-08-19 00:02:00    186.612923
2025-08-19 00:03:00    186.687989
2025-08-19 00:04:00    186.687989
                          ...    
2025-08-22 23:55:00    190.216069
2025-08-22 23:56:00    190.216069
2025-08-22 23:57:00    190.216069
2025-08-22 23:58:00    190.291135
2025-08-22 23:59:00    190.216069
Length: 5728, dtype: float64</code></pre>
</div>
</div>
<div id="c6834698" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb124"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a>emissie <span class="op">=</span> calculate_emission(</span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a>    data<span class="op">=</span>data,</span>
<span id="cb124-3"><a href="#cb124-3" aria-hidden="true" tabindex="-1"></a>    pco2_parameters<span class="op">=</span>test_parameters,</span>
<span id="cb124-4"><a href="#cb124-4" aria-hidden="true" tabindex="-1"></a>    bezetting<span class="op">=</span>bezetting,</span>
<span id="cb124-5"><a href="#cb124-5" aria-hidden="true" tabindex="-1"></a>    interpolate<span class="op">=</span><span class="bu">dict</span>(interval<span class="op">=</span><span class="st">'7min'</span>, method<span class="op">=</span><span class="st">'linear'</span>)</span>
<span id="cb124-6"><a href="#cb124-6" aria-hidden="true" tabindex="-1"></a>).resample(<span class="st">'1h'</span>).mean()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div id="107e75eb" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb125"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a>emissie <span class="op">/</span> emissie.mean()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<pre><code>Tijd
2025-08-19 00:00:00    0.420778
2025-08-19 01:00:00    0.428174
2025-08-19 02:00:00    0.395387
2025-08-19 03:00:00    0.496850
2025-08-19 04:00:00    0.615691
                         ...   
2025-08-22 19:00:00    0.489988
2025-08-22 20:00:00    0.245229
2025-08-22 21:00:00    0.267093
2025-08-22 22:00:00    0.573332
2025-08-22 23:00:00    0.595650
Freq: h, Length: 96, dtype: float64</code></pre>
</div>
</div>
<div id="7f74af93" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb127"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a>test_dataframe.info()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
DatetimeIndex: 5760 entries, 2025-08-19 00:00:00 to 2025-08-22 23:59:00
Data columns (total 34 columns):
 #   Column                           Non-Null Count  Dtype  
---  ------                           --------------  -----  
 0   NH3 concentratie stal (ppm)      5758 non-null   float64
 1   NH3 concentratie buiten (ppm)    5758 non-null   float64
 2   CO2 concentratie stal (ppm)      5758 non-null   float64
 3   CO2 concentratie buiten1 (ppm)   5752 non-null   float64
 4   CO2 concentratie buiten2 (ppm)   5750 non-null   float64
 5   CO2 concentratie buiten3 (ppm)   5748 non-null   float64
 6   Temperatuur stal ©               5752 non-null   float64
 7   Temperatuur buiten1 ©            5752 non-null   float64
 8   Temperatuur buiten2 ©            5750 non-null   float64
 9   Temperatuur buiten3 ©            5748 non-null   float64
 10  Luchtvochtigheid stal (%)        5752 non-null   float64
 11  Luchtvochtigheid buiten1 (%)     5752 non-null   float64
 12  Luchtvochtigheid buiten2 (%)     5750 non-null   float64
 13  Luchtvochtigheid buiten3 (%)     5748 non-null   float64
 14  Temperatuur meetbuis ©           5758 non-null   float64
 15  Luchtvochtigheid meetbuis (%)    5758 non-null   float64
 16  Windrichting (graden)            96 non-null     float64
 17  Windsnelheid (km/u)              96 non-null     float64
 18  NH3 concentratie stal (mg/m3)    5760 non-null   float64
 19  NH3 concentratie buiten (mg/m3)  5760 non-null   int64  
 20  CO2 concentratie stal (mg/m3)    5760 non-null   float64
 21  CO2 concentatie buiten (mg/m3)   5760 non-null   float64
 22  CO2 correctie (ppm)              5760 non-null   int64  
 23  CO2 correctie (mg/m3)            5760 non-null   float64
 24  PCO2 correctie                   5760 non-null   float64
 25  Ventilatiedebiet (m3/u)          5760 non-null   float64
 26  Ventilatiedebiet (m3/dier/u)     5758 non-null   float64
 27  NH3 emissie (kg/u)               5760 non-null   float64
 28  NH3 emissie (kg/j)               5760 non-null   float64
 29  NH3 emissie (kg/dp/j)            5760 non-null   float64
 30  Ventilatiedebiet (m3/u).1        5752 non-null   float64
 31  NH3 emissie (kg/u).1             5752 non-null   float64
 32  NH3 emissie (kg/j).1             5752 non-null   float64
 33  NH3 emissie (kg/dp/j).1          5752 non-null   float64
dtypes: float64(32), int64(2)
memory usage: 1.5 MB</code></pre>
</div>
</div>
<div id="432e4cdd" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb129"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a>test_dataframe</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">NH3 concentratie stal (ppm)</th>
<th data-quarto-table-cell-role="th">NH3 concentratie buiten (ppm)</th>
<th data-quarto-table-cell-role="th">CO2 concentratie stal (ppm)</th>
<th data-quarto-table-cell-role="th">CO2 concentratie buiten1 (ppm)</th>
<th data-quarto-table-cell-role="th">CO2 concentratie buiten2 (ppm)</th>
<th data-quarto-table-cell-role="th">CO2 concentratie buiten3 (ppm)</th>
<th data-quarto-table-cell-role="th">Temperatuur stal ©</th>
<th data-quarto-table-cell-role="th">Temperatuur buiten1 ©</th>
<th data-quarto-table-cell-role="th">Temperatuur buiten2 ©</th>
<th data-quarto-table-cell-role="th">Temperatuur buiten3 ©</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">PCO2 correctie</th>
<th data-quarto-table-cell-role="th">Ventilatiedebiet (m3/u)</th>
<th data-quarto-table-cell-role="th">Ventilatiedebiet (m3/dier/u)</th>
<th data-quarto-table-cell-role="th">NH3 emissie (kg/u)</th>
<th data-quarto-table-cell-role="th">NH3 emissie (kg/j)</th>
<th data-quarto-table-cell-role="th">NH3 emissie (kg/dp/j)</th>
<th data-quarto-table-cell-role="th">Ventilatiedebiet (m3/u).1</th>
<th data-quarto-table-cell-role="th">NH3 emissie (kg/u).1</th>
<th data-quarto-table-cell-role="th">NH3 emissie (kg/j).1</th>
<th data-quarto-table-cell-role="th">NH3 emissie (kg/dp/j).1</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Tijd</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">2025-08-19 00:00:00</th>
<td>2.9</td>
<td>0.0</td>
<td>896.0</td>
<td>369.0</td>
<td>491.0</td>
<td>452.0</td>
<td>21.3</td>
<td>19.4</td>
<td>19.2</td>
<td>20.3</td>
<td>...</td>
<td>186.687989</td>
<td>70849.331616</td>
<td>520.950968</td>
<td>0.143111</td>
<td>1253.648593</td>
<td>7.374403</td>
<td>74000.0</td>
<td>0.15</td>
<td>1324.09</td>
<td>7.79</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2025-08-19 00:01:00</th>
<td>3.0</td>
<td>0.0</td>
<td>898.0</td>
<td>370.0</td>
<td>494.0</td>
<td>453.0</td>
<td>21.4</td>
<td>19.4</td>
<td>19.3</td>
<td>20.3</td>
<td>...</td>
<td>186.612923</td>
<td>70686.713361</td>
<td>519.755245</td>
<td>0.147706</td>
<td>1293.901172</td>
<td>7.611183</td>
<td>73763.0</td>
<td>0.15</td>
<td>1346.91</td>
<td>7.92</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2025-08-19 00:02:00</th>
<td>3.0</td>
<td>0.0</td>
<td>900.0</td>
<td>370.0</td>
<td>497.0</td>
<td>453.0</td>
<td>21.4</td>
<td>19.4</td>
<td>19.2</td>
<td>20.3</td>
<td>...</td>
<td>186.612923</td>
<td>70419.971046</td>
<td>517.793905</td>
<td>0.147148</td>
<td>1289.018526</td>
<td>7.582462</td>
<td>73464.0</td>
<td>0.15</td>
<td>1341.45</td>
<td>7.89</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2025-08-19 00:03:00</th>
<td>3.0</td>
<td>0.0</td>
<td>908.0</td>
<td>368.0</td>
<td>496.0</td>
<td>455.0</td>
<td>21.3</td>
<td>19.4</td>
<td>19.2</td>
<td>20.3</td>
<td>...</td>
<td>186.687989</td>
<td>69143.699559</td>
<td>508.409556</td>
<td>0.144481</td>
<td>1265.656721</td>
<td>7.445040</td>
<td>72125.0</td>
<td>0.15</td>
<td>1318.32</td>
<td>7.75</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2025-08-19 00:04:00</th>
<td>3.0</td>
<td>0.0</td>
<td>910.0</td>
<td>367.0</td>
<td>494.0</td>
<td>456.0</td>
<td>21.3</td>
<td>19.3</td>
<td>19.2</td>
<td>20.3</td>
<td>...</td>
<td>186.687989</td>
<td>68761.690169</td>
<td>505.600663</td>
<td>0.143683</td>
<td>1258.664143</td>
<td>7.403907</td>
<td>71715.0</td>
<td>0.15</td>
<td>1312.79</td>
<td>7.72</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">...</th>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2025-08-22 23:55:00</th>
<td>2.1</td>
<td>0.0</td>
<td>611.0</td>
<td>395.0</td>
<td>490.0</td>
<td>483.0</td>
<td>16.6</td>
<td>15.0</td>
<td>14.9</td>
<td>16.4</td>
<td>...</td>
<td>190.216069</td>
<td>176125.989829</td>
<td>1295.044043</td>
<td>0.257621</td>
<td>2256.757029</td>
<td>13.275041</td>
<td>183621.0</td>
<td>0.30</td>
<td>2597.60</td>
<td>15.28</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2025-08-22 23:56:00</th>
<td>2.2</td>
<td>0.0</td>
<td>607.0</td>
<td>396.0</td>
<td>489.0</td>
<td>484.0</td>
<td>16.6</td>
<td>15.0</td>
<td>14.9</td>
<td>16.4</td>
<td>...</td>
<td>190.216069</td>
<td>180299.591483</td>
<td>1325.732290</td>
<td>0.276284</td>
<td>2420.245859</td>
<td>14.236740</td>
<td>188244.0</td>
<td>0.31</td>
<td>2691.75</td>
<td>15.83</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2025-08-22 23:57:00</th>
<td>2.1</td>
<td>0.0</td>
<td>603.0</td>
<td>394.0</td>
<td>488.0</td>
<td>487.0</td>
<td>16.6</td>
<td>15.0</td>
<td>14.9</td>
<td>16.5</td>
<td>...</td>
<td>190.216069</td>
<td>182024.946426</td>
<td>1338.418724</td>
<td>0.266249</td>
<td>2332.342192</td>
<td>13.719660</td>
<td>189992.0</td>
<td>0.30</td>
<td>2604.49</td>
<td>15.32</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2025-08-22 23:58:00</th>
<td>2.1</td>
<td>0.0</td>
<td>600.0</td>
<td>395.0</td>
<td>486.0</td>
<td>491.0</td>
<td>16.5</td>
<td>15.0</td>
<td>14.9</td>
<td>16.5</td>
<td>...</td>
<td>190.291135</td>
<td>185649.887367</td>
<td>1365.072701</td>
<td>0.271551</td>
<td>2378.789687</td>
<td>13.992881</td>
<td>193900.0</td>
<td>0.31</td>
<td>2727.22</td>
<td>16.04</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2025-08-22 23:59:00</th>
<td>2.1</td>
<td>0.0</td>
<td>599.0</td>
<td>397.0</td>
<td>485.0</td>
<td>492.0</td>
<td>16.6</td>
<td>15.0</td>
<td>14.9</td>
<td>16.5</td>
<td>...</td>
<td>190.216069</td>
<td>188332.741599</td>
<td>1384.799571</td>
<td>0.275476</td>
<td>2413.165932</td>
<td>14.195094</td>
<td>196860.0</td>
<td>0.31</td>
<td>2707.79</td>
<td>15.93</td>
</tr>
</tbody>
</table>

<p>5760 rows × 34 columns</p>
</div>
</div>
</div>
<div id="0d44b188" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb130"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(json.dumps(extract_column_names(test_dataframe), indent<span class="op">=</span><span class="dv">2</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>{
  "stal": {
    "nh3": [
      "NH3 concentratie stal (ppm)",
      "NH3 concentratie stal (mg/m3)"
    ],
    "co2": [
      "CO2 concentratie stal (ppm)",
      "CO2 concentratie stal (mg/m3)"
    ],
    "temp": [
      "Temperatuur stal \u00a9"
    ]
  },
  "buiten": {
    "nh3": [
      "NH3 concentratie buiten (ppm)",
      "NH3 concentratie buiten (mg/m3)"
    ],
    "co2": [
      "CO2 concentratie buiten1 (ppm)",
      "CO2 concentratie buiten2 (ppm)",
      "CO2 concentratie buiten3 (ppm)",
      "CO2 concentatie buiten (mg/m3)"
    ],
    "temp": [
      "Temperatuur buiten1 \u00a9",
      "Temperatuur buiten2 \u00a9",
      "Temperatuur buiten3 \u00a9"
    ]
  }
}</code></pre>
</div>
</div>
<div id="a63e0c27" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb132"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> nbdev<span class="op">;</span> nbdev.nbdev_export()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/fenke\.github\.io\/openstal");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/fenke/openstal/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>